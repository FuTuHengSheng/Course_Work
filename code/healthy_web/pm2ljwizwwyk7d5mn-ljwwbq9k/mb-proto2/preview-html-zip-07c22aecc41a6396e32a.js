(()=>{var Wt={67817:(S,g,e)=>{"use strict";e.d(g,{L:()=>C});var u=e(6515),p=e(82940);const C=async(w,n,P)=>{const _=(0,u.Z7)(w),t=(0,p.Ph)(_),v="/flpak/w-paknewft?"+new URLSearchParams({upperType:"project-basic",type:"proto2",teamCid:n,treLen:String(t.byteLength),treRawLen:String(_.length)}),r=await fetch(v,{method:"POST",body:t,headers:{"mb-client-opt":encodeURIComponent(JSON.stringify(P))}});if(!r.ok)throw Object.assign(new Error("failed to create new flpak: "+v),{status:r.status});return r.json()}},75112:(S,g,e)=>{"use strict";e.d(g,{Qs:()=>r,vn:()=>o,Ev:()=>c});var u=e(81165),p=e(53705),C=e(92029),w=e(91458);const n="hzv5",P="init",_="flpk",t=(d,M)=>d.slice(-3)+"/"+d+"/"+M+".zip",v=()=>globalThis[n],r=()=>(0,p.i3)(v()),a=()=>(0,C.hK)(v(),"missing HZV5 data"),o=async()=>(a(),v()[P]),c=async d=>{if(a(),(0,w.cQ)(d))throw new Error("no cmt data");const[M,i,D,I]=v()[_],V={t10s:M[0],size:M[1],tre:(0,u.J)(M[2])},W=i.map(h=>{let[A,T,G]=h;return{t10s:A,size:T,pbx:(0,u.J)(G)}}),Y=D.map(h=>{let[A,T]=h;return{t10s:A,pch:T}});return[V,W,Y,new Date(I)]}},79486:(S,g,e)=>{"use strict";e.d(g,{Bs:()=>Te,Q0:()=>j,VL:()=>s,hD:()=>Ge,jr:()=>ye,om:()=>m,q8:()=>ve,yS:()=>X});var u=e(87587),p=e(6515),C=e(71834),w=e(74982),n=e(60264),P=e(67817),_=e(75112),t=e(9756),v=e(53233),r=e(78467),a=e(27056),o=e(7221),c=e(38133),d=e(60074),M=e(43980),i=e(59729),D=e(45294),I=e(53092),V=e(49777),W=e(2150),Y=e(99276),h=e(81801),A=e(18104),T=e(9736),G=e(86351);ENV.IS_SKT_HTTP&&(0,C.lQ)(!0),(0,d.dp)(M.uT,M.n_);const R=(Z,O)=>async pe=>{try{const{fssDat:me}=pe;console.warn("[afterSocketJoin]",me);const le=await me.loadSOS();if(!le)return;console.warn("[afterSocketJoin] found unsaved proj tree",le);const je=await MB.global.popupHelper.confirmAsync({isClose:!0,isHTML:!0,title:"\u6062\u590D\u6570\u636E",desc:["<p>\u68C0\u6D4B\u5230\u672A\u6210\u529F\u4FDD\u5B58\u5230\u4E91\u7AEF\u7684\u6587\u4EF6\u6570\u636E\uFF0C\u6700\u540E\u8BB0\u5F55\u65F6\u95F4\u4E3A\uFF1A"+(0,I.Fy)(new Date(le.time).getTime(),"","-")+"\u3002</p>","<p>\u662F\u5426\u6062\u590D\u6570\u636E\u5230\u65B0\u6587\u4EF6\uFF1F</p>"].join(""),confirmText:"\u6062\u590D",cancelText:"\u53D6\u6D88",theme:O});if((0,d.QB)("loadSOS",void 0,{isKeep:!!je,time:le.time}),je){const{clientData:{upperCid:we}}=await(0,P.L)(le.tree,Z.team_cid,{...Z,name:Z.name+"-\u6062\u590D\u6570\u636E"});await me.freeSOS(),(0,i.ll)("/proto/design/"+we)}else await me.freeSOS()}catch(me){console.warn("[afterSocketJoin]",me)}},U=async(Z,O)=>{console.warn("[onTransferError]",Z,O),Z==="Tot"||Z==="5XX"?MB.notice&&MB.notice({text:I18N.Common.offline_alert,duration:5*1e3,showClose:!0,priority:1}):Z==="4XX"&&(window.onbeforeunload=void 0,MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>MB.global.onBackButtonClick()))},N=async(Z,O)=>{console.warn("[onReadOnlyError]",Z,O),Z!=="Cur"&&MB.notice&&MB.notice({text:I18N.Common.offline_alert,duration:5*1e3,showClose:!0,priority:1})},s=()=>{var Z;return typeof rootSdk>"u"||((Z=rootSdk)==null?void 0:Z.flatSocket.getIsConnected())},m=async Z=>{let{project_meta_cid:O,userId:pe}=Z;return(0,C.od)({userId:pe,flpakKey:O,isDummyCmt:!0,isAllowDat:!0,onTransferError:U,onReadOnlyError:N})},j=async Z=>{const{sdkStore:O}=await(0,C.Qb)({flpakKey:Z});return O},F=Z=>{let{sendCur:O}=Z;const pe=(0,u.P2)(()=>{try{const me=(0,D.U)();if(!me)return;const{current:{currentScreen:le},screencontainer:{cursorPos:je}}=me,we=le&&(le.cid||le.key);if(!we)return;const{x:Ne,y:Ve}=je||{};O(we,Ne,Ve)}catch(me){console.error("cssCur push error",me)}},.05*1e3,!0);setInterval(pe,5*1e3),document.addEventListener("pointermove",pe,{passive:!0})},ue=(0,u.P2)(()=>{var Z,O;(Z=MB)==null||(O=Z.__store__)==null||O.dispatch({type:"entry:rebuild:screen-widget-tree"})},.5*1e3),J=(0,u.P2)(()=>{var Z,O,pe,me,le;!((Z=MB)==null||(O=Z.__store__)==null)&&O.dispatch&&MB.__store__.dispatch({type:"entry:comment:rebuild:commentList"}),!((pe=MB)==null||(me=pe.webpackInterface)==null||(le=me.store)==null)&&le.dispatch&&MB.webpackInterface.store.dispatch({type:"entry:comment:rebuild:commentList"})},.5*1e3),Pe={repaint:Z=>{let{type:O,payload:pe}=Z;O===n.K&&J()}},Se={repaint:Z=>{let{type:O,payload:pe}=Z;O===w.K&&ue()}},_e=(Z,O)=>{if(Z.getFlatTree().get("B@main").sub.length===0){const pe=(0,t.wc)([],O);Z.applyDiff(pe),Z.resetUndo()}else if(!Z.getFlatTree().get("B@ref-mind")){const pe=[];pe.push({type:W.P6,key:V.T3,keySup:p.$3}),pe.push({type:W.q$,key:V.T3,attrDiff:(0,t.oE)("rbRefMind")}),Z.applyDiff(pe),Z.resetUndo()}},he=async(Z,O)=>{try{const le=await(0,C.od)(Z),je=le.sdkStore.createRoSdkStore();Object.assign(globalThis,{...le,rootSdk:le,roSdkStore:je}),(0,c.s_)()||F(le),le.sdkStore.subscribe(Se.repaint),le.cmtStore.subscribe(Pe.repaint),O&&(0,c.mK)()&&_e(le.flatStore,O)}catch(le){var pe,me;const je=le?Number(le.status)||Number((pe=le.toString().split("status")[1])==null||(me=pe.split(":")[1])==null?void 0:me.split(",")[0])||401:void 0;console.warn("[initRootSdk]",le,je),(0,d.QB)("initRootSdk",le,{status:je,sdkOption:Z,projectBasic:O}),await(0,r.mB)({status:je}),await new Promise(()=>{})}},X=async Z=>{let{projectBasicCid:O,theme:pe}=Z;const{projectBasic:me,projectMetaList:le}=await(0,v.zf)(O),[je]=le;{const{userId:we,flatKey:Ne}=await(0,v.tr)({projectBasicCid:O});console.log("[p2edit] uId="+we+" key="+Ne+" pbCid="+O),await he({userId:we,flpakKey:Ne,afterSocketJoin:R(me,pe),onTransferError:U,onReadOnlyError:N,isAllowDat:!0,isAllowCmt:!0,isAllowCur:!0},me)}return Object.assign(globalThis,{genMind:Y.L,genFlow:h.z,genTable:A.Q,genChart:T.m,genPage:G.w}),{projectBasic:me,projectMeta:je}},ve=async Z=>{let{projectBasicCid:O,project_basic:pe,project_meta:me,accessToken:le,password:je}=Z;const we=pe,Ne=me;{const{userId:Ve,flatKey:Xe}=await(0,v.MT)({projectBasicCid:O,accessToken:le,password:je});console.log("[p2edit] uId="+Ve+" key="+Xe+" pbCid="+O);const Ye=!!Ve,yt=Ye&&!(0,c.s_)();await he({userId:Ve,flpakKey:Xe,onTransferError:U,onReadOnlyError:N,isAllowDat:Ye?"RO":!1,isAllowCmt:Ye,isAllowCur:yt,token:le,passwd:je},we)}return{projectBasic:we,projectMeta:Ne}},Te=async Z=>{let{projectBasicCid:O,project_basic:pe,project_meta:me,accessToken:le,password:je,projectVersion:we}=Z;const Ne=pe,Ve=me;{const{userId:Xe,flatKey:Ye}=await(0,a.tr)({prj2VersionCid:we,projectCid:O});console.log("[p2edit] uId="+Xe+" key="+Ye+" pbCid="+O),await he({userId:Xe,flpakKey:Ye,onTransferError:U,onReadOnlyError:N,isAllowDat:!0,isAllowCmt:!1,isAllowCur:!1,token:le,passwd:je},Ne)}return{projectBasic:Ne,projectMeta:Ve}},Ce=async Z=>{let{project_meta:O}=Z;return await he({userId:void 0,flpakKey:O.cid,onTransferError:U,onReadOnlyError:N,isDummyCmt:!0},void 0),{projectMeta:O}},ye=async Z=>{let{project_basic:O,project_meta:pe}=Z;const me=O,le=pe;return await he({userId:void 0,flpakKey:pe.cid,onTransferError:U,onReadOnlyError:N,isDummyCmt:!0,__fetchFlpakAsync:_.Ev},me),{projectBasic:me,projectMeta:le}},Ge=async Z=>{let{projectBasicCid:O}=Z;const{market_template:pe,project_metas:me}=await(0,o.Mv)(O),le=me[0];return await he({userId:void 0,flpakKey:le.cid,isAllowDat:!0,isAllowCmt:!0,isAllowCur:!0,onTransferError:U,onReadOnlyError:N},pe),{projectBasic:pe,projectMeta:le}}},74223:(S,g,e)=>{"use strict";e.d(g,{I2:()=>n,MI:()=>P,f1:()=>w});var u=e(1074),p=e.n(u),C=e(70423);const w=(_,t)=>{if(!(_!=null&&_.cid))return-1;let v=0,r="",a=_;for(;a&&!a.root_project&&(v=v+1,r=a.parent_cid,!!r);)a=t.get(r);return v};function n(_){return _&&Object.entries(_).reduce((t,v)=>{let[r,a]=v;return Object.assign(t,{[p()(r)]:a})},{})}const P=(_,t,v)=>{const r=(0,C.Rv)()?"_self":t;return window.open(_,r,v)}},41768:(S,g,e)=>{"use strict";e.d(g,{$$:()=>G,AX:()=>T,D6:()=>D,ER:()=>A,Eb:()=>o,Fv:()=>h,GX:()=>j,I:()=>N,I3:()=>I,Lc:()=>Se,Oc:()=>t,Py:()=>r,Q2:()=>v,RT:()=>C,Sf:()=>Pe,YE:()=>w,_:()=>d,_D:()=>n,ad:()=>V,an:()=>s,d$:()=>M,eF:()=>c,gl:()=>J,h8:()=>ue,hA:()=>m,jr:()=>i,kj:()=>a,p4:()=>F,vL:()=>Y,yM:()=>U,zt:()=>W});var u=e(3954);const p={iphone:0,android:1,ipad:2,web:3,apple_watch:4,smart_car:5,customize:6},C=Object.entries(u).map(_e=>{let[he,X]=_e;return{device:he,modalList:Object.entries(X).map(ve=>{let[Te,{name:Ce,width:ye,height:Ge,hide:Z}]=ve;return{name:Ce,width:ye,height:Ge,hide:Z,key:Te}})}}).sort((_e,he)=>p[_e.device]-p[he.device]),w=Object.entries(u).reduce((_e,he)=>{let[X,ve]=he;return Object.assign(_e,Object.entries(ve).reduce((Te,Ce)=>{let[ye,{name:Ge,width:Z,height:O,hide:pe}]=Ce;return Object.assign(Te,{[ye]:{name:Ge,width:Z,height:O,device:X,hide:pe}})},{Android:{name:"Android",width:360,height:640,device:"android"}}))},{}),n=["iphone_12_pro_max","iphone_12_pro","iphone_se"],_=Object.entries(u).map(_e=>{let[he,X]=_e;return{device:he,modelList:Object.entries(X).map(ve=>{let[Te,{name:Ce}]=ve;return{name:Ce,key:Te}})}}).filter(_e=>["ipad","iphone","android"].includes(_e.device)).reduce((_e,he)=>[..._e,...he.modelList],[]).map(_e=>_e.key),t=_e=>_.includes(_e);let v=function(_e){return _e.LIGHT="light",_e.DARK="dark",_e}({});const r="dark",a={grid_size:10,theme:v.LIGHT},o="#ffffff",c={h:20,v:10},d={row:{count:0,gutter:20,size:144},col:{count:4,gutter:20,size:0}},M="rgba(41, 141, 248, 0.24)",i="screen-history-onLeave-project",D=!!Number(sessionStorage.getItem("inClowdz")),I={light:"rgba(245, 245, 245, 1)",dark:"rgba(21, 21, 21, 1)"},V={[v.LIGHT]:4126537215,[v.DARK]:353703423},W=[4,8,16,32,64,100,120,150,200,300,400,500,600,800,1e3,1600,3200,4e3],Y=W[0],h=W[W.length-1],A=18,T=144,G=98,R=380,U=36,N=250,s=240,m=42,j=250,F=240,ue=184,J=400,Pe=48,Se=(_e,he)=>{const X=he==null?void 0:he.fill;return!X||!(X!=null&&X.fillIsVisible)?V[_e||v.LIGHT]:X.solidColor}},4091:(S,g,e)=>{"use strict";e.d(g,{S3:()=>p,kC:()=>n,ky:()=>w,mp:()=>P,pX:()=>u});const u="/proto",p=t=>u+"/"+t,C=t=>{const v=/^\/proto\/design\/(?:([^/]+?))$/i.exec(t);return v?v[1]:new Error("project cid error")},w=t=>{let{search:v,pathname:r}=t;return r.includes("/sharing")?r.includes("dashboard")||r.includes("htmlzip")?r.split("/").at(-3):r.includes("embed/v2")?location.pathname.split("/").at(-4):r.split("/").at(-2):new URLSearchParams(v).get("token")||/^\/proto\/([^/]+?)(?:\/forum|\/uichina|\/embed|\/embed\/v2|\/htmlzip|\/sharing|\/ro)?\/?$/i.exec(r)[1]},n="/p2mkt_view",P=t=>n+"/"+t,_=t=>/^\/p2mkt_view\/(?:([^/]+?))$/i.exec(t)[1]},62609:(S,g,e)=>{"use strict";e.d(g,{K:()=>p,N:()=>C});var u=e(25926);const p=function(w,n,P){const _=n.getGuidesData()||"[]",t=new Set(JSON.parse(_)),v=new Set;return{checkGuideHasShown:r=>t.has(r),checkGuideToBeShown:r=>v.has(r),getState:()=>({commonGuidesHasShown:Array.from(t),commonGuidesToBeShown:Array.from(v)}),tryToShowGuide:r=>{var a,o;if(t.has(r)||!((a=MB)!=null&&(o=a.user)!=null&&o.id))return;const c=document.getElementById("MD_"+r);if(c){c.style.display="block";return}v.add(r),(0,u.k)(r,w,P)},markGuideAsRead:r=>{t.add(r),n.setGuidesData(JSON.stringify(Array.from(t)))},batchMarkGuideAsRead:r=>{r.forEach(a=>t.add(a)),n.setGuidesData(JSON.stringify(Array.from(t)))},closeGuide:r=>{const a=document.getElementById("MD_"+r);a&&a.parentNode&&a.parentNode.removeChild(a)},closeAllGuide:()=>{const r=document.getElementById("GUIDES");r&&r.parentNode&&r.parentNode.removeChild(r)},removeGuide:r=>{t.delete(r),n.setGuidesData(JSON.stringify(Array.from(t)))}}},C=w=>{let{store:n,api:P,commonGuidesData:_,isDesign:t,isPreview:v}=w;MB.commonGuideHelper=p(n,{getGuidesData:()=>_,setGuidesData:P.updateUserCommonGuidesData},{isDesign:t,isPreview:v})}},10737:(S,g,e)=>{"use strict";e.d(g,{Z:()=>_});var u=e(79552),p=e(77646),C=e(77200),w=e(10542);const n=t=>t.container.artboards.isShowSplash,P=(0,p.P1)([C.CL,C.vo,C.gz,n,C.GP,C.yT,C.Uq,C.EB],(t,v,r,a,o,c,d,M)=>{let{activePageKey:i,activeCanvasKey:D}=d;return{screen:t,project:v,isImmersive:r,isShowSplash:a,previewOptions:o,isPanelPreviewMode:c,activePageKey:i,activeCanvasKey:D,isPreviewCombo:M}}),_=(0,u.$j)(t=>P(t))(w.Z)},59729:(S,g,e)=>{"use strict";e.d(g,{_5:()=>w,gn:()=>_,ll:()=>P});var u=e(74223);const p="jsid",C=()=>{try{const v=new URLSearchParams(location.search).get(p);v?window.localStorage.setItem(p,v):window.localStorage.removeItem(p)}catch(t){window.localStorage.removeItem(p)}},w=function(t){t===void 0&&(t=!1);try{if(ENV.IS_ON_PREMISES||ENV.IS_WONDER_SHARE)return"";const v=window.localStorage.getItem(p);return v?t?"&jsid="+v:"?jsid="+v:""}catch(v){return""}};function n(t){const v=/^[^?#]+\?([^#]+)/.test(t),r=w(v),a=r&&(t==null?void 0:t.includes(r==null?void 0:r.slice(1)));return""+t+(a?"":r)}const P=t=>{const v=n(t);location.href=v},_=(t,v,r)=>{const a=n(t);(0,u.MI)(a,v,r)}},38625:(S,g,e)=>{"use strict";e.d(g,{CQ:()=>p,Gn:()=>u});const u=n=>{},p=n=>{},C=n=>{},w=(n,P,_)=>{}},49345:(S,g,e)=>{"use strict";e.d(g,{G1:()=>w,Sr:()=>p,ms:()=>n});var u=e(25797);const p=P=>(0,u.Gf)("/api/payment/v4/coupon/workspace_guide_2203_coupon",{space_type:P}),C=()=>fetchGetJSON("/api/web/v3/initial"),w=P=>(0,u.Gf)("/api/web/v3/account/workspace_guide_days",{org_cid:P}),n=()=>(0,u.EE)("/api/dashboard/v4/orgs/list")},53233:(S,g,e)=>{"use strict";e.d(g,{BG:()=>I,IS:()=>It,KQ:()=>j,MT:()=>bt,W:()=>Se,ZP:()=>Rt,kk:()=>ut,sE:()=>pt,tr:()=>ke,zf:()=>W});var u=e(76333),p=e(27056),C=e(7221),w=e(73669),n=e(25797),P=e(68557),_=e(35517),t=e(22686),v=e(43980),r=e(79486);const a=(l,f)=>{const b=new Error("[NO SENTRY] "+l);return Object.assign(b,f),b},o=l=>(0,n.EE)("/api/upper/web_v1/design/initial?project_cid="+l),c=(l,f)=>fetchGetJSON("/api/upper/web_v1/design/readonly_initial?access_token="+l+"&password="+f),d=async(l,f)=>{const b="/api/flat/web_v1/preview/initial?access_token="+l+"&view_mode="+f,H=await fetch(b,{credentials:"same-origin"}),de=await H.json();if(H.status!==200)throw a("[fetchGetHead] failed with "+H.status+": "+b,{status:H.status,error_type:de==null?void 0:de.error_type});return de},M=()=>(0,n.EE)("/api/web/v3/guide/guide_data"),i=l=>(0,n._Z)("/api/web/v3/guide/workspace_guides",{guide:{workspace_guides:l}}),D=l=>(0,n._Z)("/api/web/v3/guide/workspace_guides_2203",{guide:{workspace_guides_2203:l}}),I=(l,f)=>(0,n.IP)("/api/upper/web_v1/basics/"+l,{...f}),V=(l,f)=>(0,n.IP)("/api/flat/web_v1/fcg/"+l,{...f}),W=async l=>{const{project_basic:f,project_metas:b}=await(0,n.EE)("/api/upper/web_v1/basics/"+l);return{projectBasic:f,projectMetaList:b}},Y=async l=>{const{library_accesses:f}=await(0,n.EE)("/api/library/v3/orgs/"+l+"/library_accesses");return{libraryAccesses:f}},h=async l=>{const{members:f}=await(0,n.EE)("/api/dashboard/v5/orgs/"+l+"/members");return f},A=()=>(0,n.EE)("/api/web/v3/configuration/design_activity"),T=()=>(0,n.EE)("/api/web/v3/configuration/square_topic"),G=()=>(0,n.EE)("/api/web/v3/configuration/workspace"),R=async()=>{let l=[];try{const f=await(0,n.EE)("/api/web/v3/configuration/square_search_keywords");f!=null&&f.keywords&&(l=f==null?void 0:f.keywords.split(/[,，]/))}catch(f){await(0,_.Vz)(f)}return l},U=async()=>{let l=[];try{const f=await(0,n.EE)("/api/library/v4/recent_keywords");f!=null&&f.keywords&&(l=f==null?void 0:f.keywords)}catch(f){await(0,_.Vz)(f)}return l},N=()=>(0,n._E)("/api/library/v4/recent_keywords"),s=l=>(0,n.Mn)("/api/library/v4/recent_keywords",{keyword:l}),m=async()=>{let l=null;try{const f=await(0,n.EE)("/api/library/v4/workspace_labels");f!=null&&f.keywords&&(l=f==null?void 0:f.keywords)}catch(f){await(0,_.Vz)(f)}return l},j=async()=>{var l;let f;try{f=await(0,n.EE)("/api/library/v3/project_upper/user_combo_groups")}catch(b){return await(0,_.Vz)(b),{}}return{userComboGroupList:(l=f)==null?void 0:l.user_combo_groups}},F=async l=>{let f;try{f=await(0,n.bX)("/api/library/v4/users/combo_groups/"+l.cid,{...l})}catch(b){return await(0,_.Vz)(b),{}}return f},ue=l=>(0,n.IP)("/api/proto7/web_v1/screen_aligns/"+l.cid,{...l}),J=l=>(0,n._E)("/api/library/v3/project_upper/user_combo_groups/"+l),Pe=l=>F(l),Se=async l=>{var f;let{orgCid:b}=l,H;try{H=await(0,n.EE)("/api/library/v3/project_upper/org_combo_groups?org_cid="+b)}catch(de){return await(0,_.Vz)(de),{}}return{orgComboGroupList:(f=H)==null?void 0:f.org_combo_groups}},_e=async(l,f)=>{let b;try{b=await(0,n.bX)("/api/library/v4/orgs/combo_groups/"+l.cid+"?org_cid="+f,{...l})}catch(H){return await(0,_.Vz)(H),{}}return b},he=l=>(0,n._E)("/api/library/v3/project_upper/org_combo_groups/"+l),X=async l=>{const{org_combo_group:f}=await(0,n.IP)("/api/library/v3/project_upper/org_combo_groups/"+l.cid,{...l});return{org_combo_group:f}},ve=async(l,f,b)=>{let{upperCid:H,projectMetaCid:de}=f,{nextUpperCid:Me,nextProjectMetaCid:Ie}=b;try{await(0,n.Gf)("/project-buffer/prototype/check-transfer/screen-glue?upperCid="+H,{projectMetaCid:de,screenGlueCidList:l,nextUpperCid:Me,nextProjectMetaCid:Ie})}catch(Le){await(0,_.Vz)(Le)}},Te=async l=>{let{userLocale:f,projectBasicCid:b}=l;try{return await(0,r.yS)({projectBasicCid:b})}catch(H){MB.global.popupHelper.alertAsync({desc:I18N.dModule.project_load_failed,isHTML:!0,confirmText:I18N.dModule.confirm}).then(()=>{MB.global.onBackButtonClick()}),(0,v.uT)("\u9879\u76EE\u6253\u4E0D\u5F00"),console.error(H)}},Ce=async l=>{const{project_metas:f,screen_metas:b,screen_glues:H,market_template:de,icon_group:Me}=await(0,C.Mv)(l),{category:Ie}=de,Le=Ie===t.yr;if(Ie===t.Jc){const{title:Ae,source:Be}=Me,be=await(0,n.EE)(Be),Qe=P.em[Ae]||"svg",{iconGroupData:st,iconData:_t}=(0,P._7)(be,Qe);return{marketTemplate:de,iconGroupData:st,iconData:_t}}else{const Ae=[];if(Le){const Be={};b.forEach(be=>{Be[be.screen_glue_cid]=be.cid});for(const be of H){const{cid:Qe,name:st,project_meta_cid:_t}=be;Ae.push({cid:Qe,name:st,type:de.category,projectBasicCid:de.cid,projectMetaCid:_t,screenGlue:be,screenMetaCid:Be[be.cid]||""})}}else{const Be=H.find(be=>be.type==="project-main");for(const be of b){const{cid:Qe,name:st,project_meta_cid:_t,screen_glue_cid:Qt}=be;Be.cid===Qt&&Ae.push({cid:Qe,name:st,type:de.category,projectBasicCid:de.cid,projectMetaCid:_t,screenGlue:Be,screenMetaCid:Qe})}}return{marketTemplate:de,marketTemplateItemList:Ae,projectMetaList:f,screenGlueList:H,screenMetaList:b}}},ye=async()=>{const l=await(0,C.Wk)(t.yr),f=await(0,C.Wk)(t.Jc),b=await(0,C.Wk)(t.md),H=l.concat(f).concat(b),de=H.filter(Ue=>{let{category:Ae}=Ue;return[t.yr,t.md].includes(Ae)}),Me=H.filter(Ue=>{let{category:Ae}=Ue;return Ae===t.Jc}),Ie=new Map,Le=new Map;for(const Ue of H){const{category:Ae,cid:Be}=Ue;Ae===t.Jc?Le.set(Be,Ue):Ie.set(Be,Ue)}return{marketTemplateList:de,iconLibraryList:Me,marketTemplateListMap:Ie,iconLibraryListMap:Le}},Ge=l=>{let{marketTemplateCid:f}=l;return(0,n._E)("/api/community/v1/market_template/use/"+f)},Z=()=>(0,n.EE)("/api/community/v1/icon_group/builtin_icon_group"),O=async l=>{const{icon_group:{title:f,source:b},market_template:H}=await(0,C.Mv)(l.cid),de=await(0,n.EE)(b),Me=P.em[f]||"svg",{iconGroupData:Ie,iconData:Le}=(0,P._7)(de,Me);return{iconGroupData:Ie,iconData:Le,marketTemplate:H}},pe=(l,f,b,H)=>{const de={};for(const Me of l)de[Me.cid]={projectMeta:Me,screenGlueList:[],screenMetaList:[],projectScreenObjectList:[]};for(const Me of f)de[Me.project_meta_cid].screenGlueList.push(Me);for(const Me of b)de[Me.project_meta_cid].screenMetaList.push(Me);for(const Me of Object.values(de))if(Me.screenMetaList.length)for(const Ie of Me.screenMetaList){const Le=H.find(Ue=>Ue.cid===Ie.cid);Le&&Me.projectScreenObjectList.push(Le)}return de},me=()=>Date.now(),le=(l,f,b,H)=>(0,n.kt)("/node-history-statistics/new_history",{action:l,project_cid:f,team_cid:b,org_cid:H,time:me()}),je=l=>{let{projectCid:f,teamCid:b,orgCid:H}=l;le(0,f,b,H)};let we=null;const Ne=l=>{let{projectCid:f,teamCid:b,orgCid:H}=l;we&&me()-we<60*5*1e3||(we=me(),le(1,f,b,H))},Ve=async()=>{try{const{asset_groups:l}=await(0,n.sE)("/api/library/v3/asset_data/me/asset_groups");return{userAssetGroupList:l}}catch(l){await(0,_.Vz)(l)}},Xe=async l=>{let{orgCid:f}=l;try{const{asset_groups:b}=await(0,n.sE)("/api/library/v3/asset_data/org/asset_groups?org_cid="+f);return{orgAssetGroupList:b}}catch(b){await(0,_.Vz)(b)}},Ye=async l=>{try{const{asset:f,user_asset:b}=await(0,n.NS)("/api/library/v3/asset_data/me/search_by_url",{image_url:l});return{asset:f,user_asset:b}}catch(f){await(0,_.Vz)(f)}},yt=async(l,f)=>{try{const{asset:b,org_asset:H}=await(0,n.NS)("/api/library/v3/asset_data/org/search_by_url",{image_url:l,org_cid:f});return{asset:b,org_asset:H}}catch(b){await(0,_.Vz)(b)}},Vt=async l=>{try{const{user_asset_group:f}=await(0,n.bX)("/api/library/v4/users/asset_groups/"+l.cid,{...l});return{user_asset_group:f}}catch(f){await(0,_.Vz)(f)}},Zt=async l=>{try{const{org_asset_group:f}=await(0,n.bX)("/api/library/v4/orgs/asset_groups/"+l.cid,{...l});return{org_asset_group:f}}catch(f){await(0,_.Vz)(f)}},zt=async l=>{try{return await(0,n.bX)("/api/library/v3/asset_data/me/assets/"+l.asset_cid,{...l})}catch(f){await(0,_.Vz)(f)}},Jt=async l=>{try{return await(0,n.bX)("/api/library/v3/orgs/assets/"+l.cid+"?org_cid="+l.org_cid,{...l})}catch(f){await(0,_.Vz)(f)}},qt=async l=>{let{cid:f,name:b,groupCid:H}=l;try{await(0,n.NS)("/api/library/v3/asset_data/me/assets",{cid:f,name:b,group_cid:H})}catch(de){await(0,_.Vz)(de)}},wt=async l=>{let{orgCid:f,cid:b,name:H,groupCid:de}=l;try{const Me=await(0,n.NS)("/api/library/v3/orgs/assets",{cid:b,org_cid:f,name:H,group_cid:de});return Me==null?void 0:Me.cid}catch(Me){await(0,_.Vz)(Me)}},vt=async l=>{let{user_asset_group_cid:f,org_cid:b,org_asset_group_cid:H}=l;try{return(0,n.NS)("/api/library/v3/asset_data/org/asset_group_from_user",{user_asset_group_cid:f,org_cid:b,org_asset_group_cid:H})}catch(de){await(0,_.Vz)(de)}},Dt=async l=>{let{orgCid:f="me",keyword:b,type:H="all"}=l;const{assets:de,combos:Me,asset_groups:Ie,combo_groups:Le,related_asset_groups:Ue,related_combo_groups:Ae}=await(0,n.EE)("/api/library/v3/asset_data/search?org_cid="+f+"&keyword="+b+"&type="+H);return{assets:de.map(Be=>({cid:Be.asset_cid,...Be})),combos:Me,assetGroups:Ie,comboGroups:Le,relatedAssetGroups:Ue,relatedComboGroups:Ae}},Yt=async l=>{try{const{user_asset_group:f,user_assets:b}=await(0,n.sE)("/api/library/v3/asset_data/me/asset_groups/"+l);return{user_asset_group:f,userAssets:b}}catch(f){await(0,_.Vz)(f)}},$t=async l=>{try{const{org_asset_group:f,org_assets:b}=await(0,n.sE)("/api/library/v3/orgs/asset_groups/"+l);return{org_asset_group:f,orgAssets:b}}catch(f){await(0,_.Vz)(f)}},At=async l=>{await(0,n._E)("/api/library/v3/asset_data/me/assets/"+l)},Xt=async l=>{await(0,n._E)("/api/library/v3/orgs/assets/"+l.cid+"?org_cid="+l.org_cid)},ge=async l=>{await(0,n._E)("/api/library/v3/asset_data/me/asset_groups/"+l)},Ot=async l=>{await(0,n._E)("/api/library/v3/orgs/asset_groups/"+l)},oe=l=>(0,n.EE)("/update_web_version?next_web_version="+l),ct=l=>(0,n._Z)("/preferences/update",{...l}),Tt=(l,f)=>(0,n.bX)("/api/library/v4/users/combo_groups/"+l,{...f}),it=l=>(f,b)=>{const H={...b,org_cid:l};return(0,n.bX)("/api/library/v4/orgs/combo_groups/"+f,{...H})},De=async(l,f)=>{try{return await(0,n.bX)("/api/library/v4/users/asset_groups/"+l,{...f})}catch(b){await(0,_.Vz)(b)}},Lt=l=>async(f,b)=>{try{const H={...b,org_cid:l};return await(0,n.bX)("/api/library/v4/orgs/asset_groups/"+f,{...H})}catch(H){await(0,_.Vz)(H)}},lt=async(l,f)=>{let b=null;try{const H=await(0,n.sE)("/api/community/v1/workspace?category="+l+"&plabel="+f);H!=null&&H.market_templates&&(b=H==null?void 0:H.market_templates)}catch(H){await(0,_.Vz)(H)}return b},dt=async l=>{let f=null;try{const b=await(0,n.EE)("/flpak/w-p2wsearch?"+l);b!=null&&b.data&&(f=b)}catch(b){await(0,_.Vz)(b)}return f},gt=async l=>{let f=null;try{const b=await(0,n.EE)("/flpak/w-p2meta/"+l);b!=null&&b.length&&(f=b)}catch(b){await(0,_.Vz)(b)}return f},pt=async l=>{let{currentComboPanel:f,projectMetaCid:b}=l;try{await(0,n.Gf)("/flpak/w-migrate-"+f+"-combo-group/"+b+"?mode=normal")}catch(H){await(0,_.Vz)(H)}},ke=async l=>{let{projectBasicCid:f}=l;try{const{userId:b,flatKey:H}=await(0,n.EE)("/api/flat/web_v1/proj2-edit-info?prj2Cid="+f);return{userId:b,flatKey:H}}catch(b){await(0,_.Vz)(b)}},bt=async l=>{let{projectBasicCid:f,accessToken:b,password:H}=l;try{const{userId:de,flatKey:Me}=await(0,n.EE)("/api/flat/web_v1/proj2-preview-info?prj2Cid="+f+"&access_token="+b+"&password="+H);return{userId:de,flatKey:Me}}catch(de){await(0,_.Vz)(de)}},It=l=>(0,n.EE)("/api/dashboard/v5/orgs/"+l),ut=async l=>{const{project:f}=await(0,n.EE)("/api/dashboard/v5/projects/"+l);return f},Bt=async l=>(0,n.EE)("/api/upper/web_v1/basics/statstics/"+l),Rt={requestProjectFullData:Te,requestUserComboGroupList:j,requestOrgComboGroupList:Se,requestCreateUserComboGroup:F,requestCreateOrgComboGroup:_e,requestDeleteUserComboGroup:J,requestUpdateUserComboGroup:Pe,requestDeleteOrgComboGroup:he,requestUpdateOrgComboGroup:X,requestProjectTransferScreenGlue:ve,requestSketchArtboardList:u.cH,requestSketchArtboardById:u.LD,requestSliceByArtboardId:u.s,requestSliceZipByArtboardId:u.LT,requestUserCommonGuidesData:M,updateUserCommonGuidesData:i,updateUser2203GuidesData:D,checkSharingPermission:u.b9,fetchProjectComment:u.Jk,fetchProjectScreenCommentThreadCountMap:u.bN,requestMarketTemplateDataForLibrary:ye,requestMarketTemplateDataFromCid:Ce,requestMarketTemplateItemUnused:Ge,fetchCreateCommentThread:u.Q6,fetchCreateComment:u.C6,fetchDeleteCommentThread:u.bz,fetchDeleteComment:u.sv,updateProjectBasicsInfo:I,updateComboProjectBasicsInfo:V,getProjectAllVersions:p.Bl,postCreateNewVersion:p.nG,putUpdateVersionInfo:p.dp,postCheckoutVersion:p.UJ,getProjectOnlineCollaborators:p.go,deleteVersion:p.h_,requestProjectShare:w.o7,updateCurrentProjectShare:w.Of,getAllSharings:w.UC,trackViewProject:je,trackEditProject:Ne,requestUserAssetGroupList:Ve,requestOrgAssetGroupList:Xe,requestMeAssetDataBySearchUrl:Ye,requestOrgAssetDataBySearchUrl:yt,requestUpdateUserAssetGroup:Vt,requestUpdateOrgAssetGroup:Zt,requestUpdateUserAsset:zt,requestUpdateOrgAsset:Jt,requestDeleteUserAsset:At,requestDeleteOrgAsset:Xt,requestDeleteUserAssetGroup:ge,requestDeleteOrgAssetGroup:Ot,requestCreateOrgAsset:wt,requestCreateUserAsset:qt,requestUserAssetGroupToOrgAssetGroup:vt,requestLibrarySearchData:Dt,requestOrgMembers:h,requestAllLibraryAccess:Y,requestDesignInitialData:o,requestBuiltinIconGroup:Z,collectProjectMetaDataMap:pe,requestConfigurationData:A,requestConfigurationSquareTopicData:T,requestWorkspaceConfiguration:G,requestConfigurationHotKeyWords:R,requestRecentKeywords:U,requestDeleteRecentKeywords:N,requestAddRecentKeywords:s,requestConfigurationWorkspaceLabels:m,requestUpdateRecentImportResources:C.Im,requestUserAssetsDataFromCid:Yt,requestOrgAssetsDataFromCid:$t,requestUserStarredList:C.Wk,requestUserUsedResources:C.jj,requestStarredResources:C.kU,requestUnStarredResources:C.ZW,requestResourcesDetailData:C.Mv,requestRecentResourcesList:C.pS,requestHotIcons:C.w3,requestResourceHisotry:C.D4,requestResourcesListForSource:C.AY,requestIconGroupIconDataForCid:O,requestResourcesListByCategory:C._l,requestUpdateScreenAlign:ue,requestUpdateWebVersion:oe,requestUpdatePreference:ct,requestSortUserAssetGroup:De,requestSortOrgAssetGroup:Lt,requestSortUserComboGroup:Tt,requestSortOrgComboGroup:it,requestFindMarketTemplates:lt,requestSearchResourcesData:dt,requestResourcesDetails:gt,fetchProjectSummary:Bt}},76333:(S,g,e)=>{"use strict";e.d(g,{C6:()=>h,Jk:()=>V,LD:()=>M,LT:()=>D,Q6:()=>Y,b9:()=>I,bN:()=>W,bz:()=>A,cH:()=>d,s:()=>i,sv:()=>T});var u=e(30336),p=e(25797),C=e(73669),w=e(46295);const n=s=>{let{isVersions:m}=s;return{requestPreviewSetting:r,requestPreviewInitialData:t,requestPreviewEmbedInitial:o,requestProjectFullDataByAccessToken:c,requestSketchArtboardList:d,requestSketchArtboardById:M,requestSliceByArtboardId:i,requestSliceZipByArtboardId:D,checkSharingPermission:I,fetchProjectComment:V,fetchProjectScreenCommentThreadCountMap:W,requestProjectShare:m?requestProjectShareVersion:requestProjectSharePreview,requestUserCommonGuidesData:P,updateUserCommonGuidesData:_,fetchCreateCommentThread:Y,fetchCreateComment:h,fetchDeleteCommentThread:A,fetchDeleteComment:T,updateProjectBasicsInfo:G,updateComboProjectBasicsInfo:R,requestPreviewInitialData4ReadOnlyV2:v}},P=()=>fetchGetJSON("/api/web/v3/guide/guide_data"),_=s=>fetchPutHead("/api/web/v3/guide/workspace_guides",{guide:{workspace_guides:s}}),t=async s=>{let{projectAccessToken:m,projectEncryptedPassword:j}=s;const F=j?"&password="+j:"";return(0,p.EE)("/api/upper/web_v1/design/readonly_initial?access_token="+m+F)},v=async s=>{let{projectAccessToken:m,view_mode:j}=s;return fetchGetJSON("/api/flat/web_v1/preview/initial?access_token="+m+"&view_mode="+j)},r=s=>{let{projectAccessToken:m,password:j}=s;return(0,p.EE)("/api/upper/web_v1/preview/setting?access_token="+m+"&password="+(j||""))},a=s=>{let{projectAccessToken:m,password:j}=s;return(0,p.EE)("/api/flat/web_v1/preview/setting?access_token="+m+"&password="+(j||""))},o=s=>{let{projectAccessToken:m}=s;return(0,p.EE)("/api/upper/web_v1/preview/embed_initial?access_token="+m)},c=async s=>{let{projectAccessToken:m,projectEncryptedPassword:j,userLocale:F,projectVersion:ue}=s;const J=await(0,u.lA)({projectBasicAccessToken:m,projectBasicEncryptedPassword:j,userLocale:F,projectVersion:ue});if(!J)return;const{projectMetaList:[Pe],screenGlueList:Se,screenMetaList:_e,projectScreenObjectList:he,projectBasic:X,screenAlignList:ve}=J;return{projectMeta:Pe,screenGlueList:Se,screenMetaList:_e,projectScreenObjectList:he,projectBasic:X,screenAlignList:ve}},d=s=>(0,p.EE)("/api/upper/web_v1/artboards?project_cid="+s),M=s=>(0,p.EE)("/api/upper/web_v1/artboards/layers?artboard_id="+s),i=s=>(0,p.EE)("/api/upper/web_v1/artboards/slices_json?artboard_id="+s),D=s=>{let{artboardId:m,encryptedPassword:j}=s;return(0,p.EE)("/api/upper/web_v1/artboards/slices_zip?artboard_id="+m+"&encrypted_password="+j)},I=async s=>{try{const{result:m}=await(0,p.EE)("/api/accesses/v4/project/"+s+"/permission_check?permission=P:update");return m}catch(m){return!1}},V=s=>{let{projectCid:m,projectEncryptedPassword:j,accessToken:F}=s;return(0,p.EE)("/api/proto7/web_v1/comments?project_cid="+m+"&password="+(j||"")+"&access_token="+F)},W=s=>{let{projectAccessToken:m,projectEncryptedPassword:j}=s;return(0,p.EE)("/api/upper/web_v1/preview/"+m+"/screen_comments_thread_count_map?encrypted_password="+(j||""))},Y=s=>(0,p._Z)("/api/proto7/web_v1/commentthreads/"+s.cid,{...s}),h=s=>(0,p._Z)("/api/proto7/web_v1/comments/"+s.cid,{...s}),A=s=>(0,p.Bh)("/api/proto7/web_v1/commentthreads/"+s),T=s=>(0,p.Bh)("/api/proto7/web_v1/comments/"+s),G=(s,m)=>fetchPutJSON("/api/upper/web_v1/basics/"+s,{...m}),R=(s,m)=>fetchPutJSON("/api/flat/web_v1/fcg/"+s,{...m}),U=(s,m)=>fetchGetJSON("/api/upper/web_v1/basics/auth/"+s+"?password="+m);var N={requestPreviewSetting:r,requestPreviewSettingV2:a,requestPreviewInitialData:t,requestProjectFullDataByAccessToken:c,requestSketchArtboardList:d,requestSketchArtboardById:M,requestSliceByArtboardId:i,requestSliceZipByArtboardId:D,checkSharingPermission:I,requestPreviewEmbedInitial:o,fetchProjectComment:V,fetchProjectScreenCommentThreadCountMap:W,requestProjectShare:C.o7,fetchCreateCommentThread:Y,fetchCreateComment:h,fetchDeleteCommentThread:A,fetchDeleteComment:T}},46295:(S,g,e)=>{"use strict";const u={access_token:"",comment_permission:"",device_model:"",highlight:!0,password:"",project_cid:"",screen_visible_switch:!1,screen_visible_list:[],shell_type:"device",simulator_type:"device",sticky:!0,view_access:"private",view_count:0,view_prd:!1,wechat:!1},p=async()=>({projectShareMock:u})},32380:(S,g,e)=>{"use strict";e.d(g,{H:()=>n,m:()=>w});var u=e(25797),p=e(69930),C=e(65155);const w=function(P){var _;P===void 0&&(P="");const{isExperience:t,isLoggedExperience:v}=(_=MB.global)==null?void 0:_.designOptions;if(P==="isSave"){if(t)return MB.global.popupHelper.loginAsync({onConfirm:n}),!0;if(v){const r=MB.getRootProject&&MB.getRootProject();return MB.global.popupHelper.teamSelectModalAsync({projectCid:r==null?void 0:r.cid,onConfirm:a=>p.R.api.experienceTriggerAllSaveAfterLogin(a)}),!0}else return!1}else return t?(MB.global.popupHelper.loginAsync({onConfirm:n}),!0):!1},n=async()=>{if((0,C._$)()){window.top.location.reload();return}const{user:P}=await(0,u.EE)("/api/web/v3/initial");(0,u._Z)("/api/web/v3/guide/complete_workspace_guide"),MB.user=P,Object.assign(MB.global.designOptions,{isExperience:!1,isLoggedExperience:!0}),MB.action("update:design:options",{designOptions:{...MB.global.designOptions}}),MB.action("current:update:state",{currentUser:P});const _=MB.getRootProject&&MB.getRootProject();MB.global.popupHelper.teamSelectModalAsync({projectCid:_==null?void 0:_.cid,onConfirm:t=>p.R.api.experienceTriggerAllSaveAfterLogin(t)})}},23555:(S,g,e)=>{"use strict";e.d(g,{Z:()=>w});var u=e(79552),p=e(77200),C=e(93858);const w=(0,u.$j)(n=>{const P=(0,p.kc)(n),_=(0,p.GP)(n),{isWonderShare:t,isOnPremises:v}=(0,p.CD)(n),r=(0,p.Ds)(n),a=(0,p.ts)(n),o=(0,p.Nu)(n);return{user:a,mode:r,theme:o,previewOptions:_,previewSetting:P,isWonderShare:t,isOnPremises:v,isHiddenToolBar:(0,p.qe)(n)}})(C.Z)},46807:(S,g,e)=>{"use strict";e.d(g,{Z:()=>w});var u=e(79552),p=e(77200),C=e(45289);const w=(0,u.$j)(n=>{const P=(0,p.kc)(n),_=(0,p.GP)(n),t=(0,p.S7)(n),v=(0,p.EB)(n);return{previewOptions:_,previewSetting:P,isCommunityComboPreview:t,isPreviewCombo:v}})(C.Z)},51622:(S,g,e)=>{"use strict";var u=e(46198),p=e(75112),C=e(63077),w=e(7485),n=e(39110),P=e(21202);const _={"sk-bouncedelay":"ZBrU7Yes6CevGkk6hArA"};window.$=window.jQuery=e(8435),e(82888),e(34268),e(87645),e(22020),e(11460);var t=e(14730),v=e(46807),r=e(10737),a=e(23555),o=e(70423);const c=L=>{const{isEmbedV1:E=!1}=L||{};return{isDesktop:!((0,o.tq)()||E),isInApp:!1,isMultiLink:!1,isMobile:(0,o.tq)(),isIOSClient:(0,o.B0)(),isStandAlone:(0,o.IF)(),isEmbedV1:E,isEmbedV2:!1,isHTMLZip:!1,isUIChina:(0,o.Md)(),isForum:(0,o._j)(),isElectron:(0,o.d)(),isSquare:!1,isFeishu:(0,o.Rv)(),isWechat:(0,o.CL)(),...L}},d=L=>{const{isMobile:E,isEmbedV2:y,isSquare:B}=L;return E?r.Z:y||B?v.Z:a.Z};var M=e(15186),i=e(78467),D=e(75985),I=e(30733),V=e(76333),W=e(77200);const Y=L=>localStorageRemoveItem(L+"_pwd"),h=L=>(0,I.GQ)(L+"_pwd"),A=(L,E)=>localStorageSetItem(L+"_pwd",E),T=L=>{const E=async(y,B,z)=>{try{const{isHTMLZip:k,isMobile:K}=getPreviewOptions(MB.webpackInterface.store.getState());k||(K&&MB.messageBucket.send("ready"),await checkAuthorization(y,B),MB.global.popupHelper.promptGetPasswordAsync(!1));const Q=await L({projectAccessToken:y,projectVersion:z,projectEncryptedPassword:B,userLocale:window.MBLocale});return A(y,B),Q}catch(k){console.error("[getProjectFullData] failed: "+k),Y(y)}};return async y=>{let{projectAccessToken:B,projectVersion:z,projectEncryptedPassword:k,isPasswordRequired:K}=y;return k=k||new URLSearchParams(location.search).get("password")||h(B),await G(E,K,B,k,z)||[]}},G=async(L,E,y,B,z)=>{let k;if(k=await L(y,B,z),!k&&!E){var K,Q;(K=MB)==null||(Q=K.messageBucket)==null||Q.send("mobileLoadProjectError",{errMsg:I18N.dPages.no_permission_to_app})}let re=1/0,q=!1,ce=0;for(;!k&&re;)ce++,re--,B=md5(await MB.global.popupHelper.promptGetPasswordAsync(!0,q)),k=await L(y,B,z),k||(q=!0);return MB.global.popupHelper.promptGetPasswordAsync(!1),k},R=async(L,E)=>{let y;try{y=await checkAuthorization(L,E)}catch(B){y=B}return y},U=async function(L,E){E===void 0&&(E=MB.global.popupHelper);let y=!1,B=md5(await E.promptGetPasswordAsync(!0,!1));for((await R(L,B)).status===403&&(y=!0);y;)B=md5(await E.promptGetPasswordAsync(!0,y)),(await R(L,B)).status===403?y=!0:y=!1;return E.promptGetPasswordAsync(!1),B},N=(L,E,y)=>{if(!L)return!0;if(E){var B;return(y==null||(B=y.permissions.find(k=>k.user_id===L.id))==null?void 0:B.role)===void 0}else return L.id!==y.owner_id};var s=e(69930),m=e(86185),j=e(85322),F=e(24011),ue=e(53233),J=e(79486),Pe=e(70103),Se=e(79552),_e=e(23895),he=e(11294),X=e(35269);const ve={isInNewGuide:!1,isOnPremises:!1,canUploadToSquare:!1},Te=function(L){L===void 0&&(L="POPUP-HELPER-ROOT");const E=document.createElement("div");E.id=L,document.body.appendChild(E);const y=(0,Pe.MT)(_e.Z);u.render((0,X.jsx)(Se.zt,{store:y,children:(0,X.jsx)(he.Z,{})}),E);const{confirmAsync:B,alertAsync:z,alertAsyncWide:k,alertAsyncBlocked:K,promptGetPasswordAsync:Q,loginAsync:re,teamSelectModalAsync:q,sharingAsync:ce,chargeAsync:x,upgradeChatGPTAsync:te}=Ce(y.dispatch);return{confirmAsync:B,alertAsync:z,alertAsyncWide:k,alertAsyncBlocked:K,promptGetPasswordAsync:Q,loginAsync:re,teamSelectModalAsync:q,sharingAsync:ce,chargeAsync:x,upgradeChatGPTAsync:te,destroy:()=>{u.unmountComponentAtNode(E),E.remove()}}},Ce=L=>({confirmAsync:x=>{let{className:te,title:se,desc:ae,isHTML:fe,confirmText:ne,cancelText:ie,isClose:Ee,theme:Oe}=x;return new Promise(Re=>L({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,className:te,title:se,desc:ae,isHTML:fe,type:"alert",alertType:"confirm",canClose:Ee!==!1,canCancel:!0,canConfirm:!0,cancelText:ie,confirmText:ne,theme:Oe,onCancel:()=>Re(!1),onConfirm:()=>Re(!0)}}}))},alertAsync:x=>{let{title:te,desc:se,isHTML:ae,confirmText:fe}=x;return new Promise(ne=>L({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:te,desc:se,isHTML:ae,type:"alert",alertType:"alert",canClose:!0,canCancel:!1,canConfirm:!0,confirmText:fe,onConfirm:()=>ne()}}}))},alertAsyncWide:x=>{let{title:te,desc:se,isHTML:ae,confirmText:fe}=x;return new Promise(ne=>L({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:te,desc:se,isHTML:ae,type:"functional",alertType:"alert",canClose:!0,canCancel:!1,canConfirm:!0,confirmText:fe,onConfirm:()=>ne()}}}))},alertAsyncBlocked:x=>{let{title:te,desc:se,isHTML:ae,confirmText:fe}=x;return new Promise(ne=>L({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:te,desc:se,isHTML:ae,type:"alert",alertType:"alert",canClose:!1,canCancel:!1,canConfirm:!0,confirmText:fe,onConfirm:()=>ne()}}}))},promptGetPasswordAsync:(x,te)=>new Promise(se=>L({type:"modal:update:state",payload:{previewAuthModal:{isOpen:x,isWrongPwd:te,onConfirm:ae=>ae&&se(ae)}}})),loginAsync:x=>{let{onCancel:te=ye,onConfirm:se=ye,type:ae="signin",source:fe}=x;return L({type:"modal:update:state",payload:{loginModal:{source:fe,isOpen:!0,type:ae,onCancel:te,onConfirm:se}}})},teamSelectModalAsync:x=>{let{projectCid:te="",onCancel:se=ye,onConfirm:ae=ye}=x;return L({type:"modal:update:state",payload:{teamSelectModal:{isOpen:!0,projectCid:te,onCancel:se,onConfirm:ae}}})},sharingAsync:x=>{let{project:te,theme:se,isGuestMode:ae,screenMetaList:fe=[],onUpdateProject:ne=ye,extraInfo:ie=ve,screenMetaCidToVisit:Ee,user:Oe}=x;return L({type:"modal:update:state",payload:{sharingModal:{isOpen:!0,project:te,theme:se,extraInfo:ie,isGuestMode:ae,screenMetaList:fe,onUpdateProject:ne,screenMetaCidToVisit:Ee,user:Oe}}})},chargeAsync:x=>L({type:"modal:update:state",payload:{chargeOverlay:{isOpen:!0,...x}}}),upgradeChatGPTAsync:x=>L({type:"modal:update:state",payload:{upgradeChatGPTModal:{isOpen:!0,...x}}})}),ye=()=>{};var Ge=e(46295),Z=e(62609);const{MB:O}=window;O.f.inSharing=!0;const pe=L=>{let{initialData:E,designOptions:y,previewOptions:B,popupHelper:z,sharing:k,password:K,api:{requestProjectFullDataByAccessToken:Q,requestSketchArtboardList:re,requestSketchArtboardById:q,requestSliceByArtboardId:ce,requestSliceZipByArtboardId:x,checkSharingPermission:te,fetchProjectComment:se,fetchProjectScreenCommentThreadCountMap:ae,requestProjectShare:fe,requestUserCommonGuidesData:ne,updateUserCommonGuidesData:ie,fetchCreateCommentThread:Ee,fetchCreateComment:Oe,fetchDeleteCommentThread:Re,fetchDeleteComment:Ze,updateProjectBasicsInfo:ze,updateComboProjectBasicsInfo:nt}}=L;const{isMobile:mt,isIOSClient:ft,isStandAlone:ot,isHTMLZip:at}=B;O.config.minFS=calcMinFontSize(),(ot||ft)&&(document.documentElement.style.height="100vh");const{runnerController:et,messageBucket:Je,webpackInterface:$e,PreviewApp:Fe}=createPreviewRelated(getPreviewComponentByOptions(B));return setExternal({api:{requestSketchArtboardList:re,requestSketchArtboardById:q,requestSliceByArtboardId:ce,requestSliceZipByArtboardId:x,checkSharingPermission:te,fetchProjectComment:se,fetchProjectScreenCommentThreadCountMap:ae,requestUserCommonGuidesData:ne,updateUserCommonGuidesData:ie,fetchCreateCommentThread:Ee,fetchCreateComment:Oe,fetchDeleteCommentThread:Re,fetchDeleteComment:Ze,updateProjectBasicsInfo:ze,updateComboProjectBasicsInfo:nt}}),Object.assign(O,{runnerController:et,messageBucket:Je,webpackInterface:$e,global:{popupHelper:z,designOptions:y}}),O.webpackInterface.store.dispatch({type:"entry:init:preview:options",payload:{previewOptions:B}}),{requestData:async qe=>{var xe,tt,We,rt;let{projectAccessToken:Ke,projectEncryptedPassword:kt,isPasswordRequired:ht,projectBasicCid:Gt}=qe;const{user:Mt,org:Pt,team:Ut,orgList:xt,preference:rr,MBSketchPluginDownloadURL:Ct,canEditByCurrentUser:Nt,project_basic:sr,project_meta:ur,space:_r}=E,mr=getIsNeedInputPassword(Mt,_r,sr);let Et=loadProjectEncryptedPassword(Ke);const fr=await tryCheckAuthorization(Ke,Et);if(ht&&mr&&fr.status===403){var nr;O==null||(nr=O.messageBucket)==null||nr.send("ready"),Et=await checkAuthorizationWithPrompt(Ke,createPopupHelper()),saveProjectEncryptedPassword(Ke,Et)}let St,Ft;try{const{projectBasic:He,projectMeta:jt}=await requestProjectFullDataFlat4ReadOnly({projectBasicCid:Gt,accessToken:Ke,project_basic:sr,project_meta:ur,password:Et||K});St=He,Ft=jt}catch(He){return setTimeout(()=>{var jt,ar;return O==null||(jt=O.messageBucket)==null?void 0:jt.send("mobileLoadProjectError",{errMsg:"\u4EC5\u4F01\u4E1A\u6210\u5458\u53EF\u89C1-"+(O!=null&&(ar=O.user)!=null&&ar.id?"\u5DF2\u767B\u5F55\u4F46\u975E\u4F01\u4E1A\u6210\u5458":"\u672A\u767B\u5F55")})},1e3),crashedPageWithUser(He)}O.webpackInterface.store.dispatch({type:"entry:preview:update:current:sharing",payload:{sharing:k}}),O.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:rr||{}}});const hr=Nt&&(Ft.is_org_project?!((xe=St)!=null&&xe.expired):!((tt=St)!=null&&tt.expired)||Mt.apps.length<=Mt.free_projects_count);if(Object.assign(O,{user:Mt||{},canEditByCurrentUser:hr,org:Pt||void 0}),O.webpackInterface.store.dispatch({type:"entry:state:init"}),(We=O.user)!=null&&We.id&&Pt)try{const He=await DesignAPI.requestOrgMembers(Pt.cid);O.members=He}catch(He){console.log(He)}(rt=O.user)!=null&&rt.id&&O.webpackInterface.store.dispatch({type:"entry:comment:rebuild:commentList"}),hideLoading();let or="[]";try{const{guide:He}=await ne();or=(He==null?void 0:He.workspace_guides)||"[]"}catch(He){console.error("\u83B7\u53D6 guide_data \u5931\u8D25")}return initCommonGuide({store:O.webpackInterface.store,commonGuidesData:or,api:{updateUserCommonGuidesData:ie},isDesign:!1,isPreview:!0}),{projectAlike:St,projectMeta:Ft,projectShare:k}},renderPreview:(qe,xe,tt,We)=>{if(We!=null&&We.screen_visible_switch&&(We==null?void 0:We.screen_visible_list.length)===0)return setTimeout(()=>{var ht;return O==null||(ht=O.messageBucket)==null?void 0:ht.send("mobileLoadProjectError",{errMsg:"\u753B\u5E03\u65E0\u9875\u9762\uFF0C\u65E0\u6CD5\u9884\u89C8"})},1e3),_jsx(CrashedPage,{errorType:404,customTitle:I18N.dModule.zero_screen_err_title,customDes:I18N.dModule.zero_screen_err_des,isShowSecondaryBtn:!1,primaryClick:()=>backToHomePageWithSaTrack("zh-CN","\u539F\u578B-\u5206\u4EAB\u94FE\u63A5\u9875\u9762\u4E3A\u7A7A")});const rt=new KeyboardManager,Ke=new URLSearchParams(location.search),kt=mt?"preview":Ke.has("inspect")?"inspect":Ke.has("comment")?"comment":"preview";return _jsx(KeyboardManagerContext.Provider,{value:rt,children:_jsx(TooltipsManagerProvider,{children:_jsx(Fe,{store:$e.store,previewMode:kt,projectAlike:qe,projectMeta:xe,projectShare:We})})})}}},me=L=>{let{initialData:E,designOptions:y,previewOptions:B,popupHelper:z,sharing:k,password:K,api:{requestProjectFullDataByAccessToken:Q,requestSketchArtboardList:re,requestSketchArtboardById:q,requestSliceByArtboardId:ce,requestSliceZipByArtboardId:x,checkSharingPermission:te,requestProjectShare:se,requestUserCommonGuidesData:ae,updateUserCommonGuidesData:fe,updateProjectBasicsInfo:ne,updateComboProjectBasicsInfo:ie}}=L;const{isMobile:Ee,isIOSClient:Oe,isStandAlone:Re,isHTMLZip:Ze}=B;O.config.minFS=(0,t.T_)(),(Re||Oe)&&(document.documentElement.style.height="100vh");const{runnerController:ze,messageBucket:nt,webpackInterface:mt,PreviewApp:ft}=(0,M.o)(d(B));return(0,s.J)({api:{requestSketchArtboardList:re,requestSketchArtboardById:q,requestSliceByArtboardId:ce,requestSliceZipByArtboardId:x,checkSharingPermission:te,requestUserCommonGuidesData:ae,updateUserCommonGuidesData:fe,updateProjectBasicsInfo:ne,updateComboProjectBasicsInfo:ie}}),Object.assign(O,{runnerController:ze,messageBucket:nt,webpackInterface:mt,global:{popupHelper:z,designOptions:y}}),O.webpackInterface.store.dispatch({type:"entry:init:preview:options",payload:{previewOptions:B}}),{requestData:async ot=>{var at;let{projectAccessToken:et,projectEncryptedPassword:Je,isPasswordRequired:$e,projectBasicCid:Fe}=ot;const{user:qe,org:xe,team:tt,orgList:We,preference:rt,MBSketchPluginDownloadURL:Ke,canEditByCurrentUser:kt,project_basic:ht,project_meta:Gt,space:Mt}=E,Pt=h(et);let Ut,xt;try{const{projectBasic:Ct,projectMeta:Nt}=await(0,J.jr)({projectBasicCid:Fe,accessToken:et,project_basic:ht,project_meta:Gt,password:Pt||K});Ut=Ct,xt=Nt}catch(Ct){return(0,i.mB)(Ct)}return O.webpackInterface.store.dispatch({type:"preview:set:current-projectShare",payload:{projectShare:k}}),O.webpackInterface.store.dispatch({type:"entry:preview-setting:update:is-highlight",payload:{isHighlight:(at=k.highlight)!=null?at:!0}}),O.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:rt||{}}}),Object.assign(O,{user:qe||{},canEditByCurrentUser:!1,org:xe||void 0}),O.webpackInterface.store.dispatch({type:"entry:state:init"}),(0,m.Z)(),{projectAlike:Ut,projectMeta:xt}},renderPreview:(ot,at,et,Je)=>{if(Je!=null&&Je.screen_visible_switch&&(Je==null?void 0:Je.screen_visible_list.length)===0)return setTimeout(()=>{var xe;return O==null||(xe=O.messageBucket)==null?void 0:xe.send("mobileLoadProjectError",{errMsg:"\u753B\u5E03\u65E0\u9875\u9762\uFF0C\u65E0\u6CD5\u9884\u89C8"})},1e3),(0,X.jsx)(C.Z,{errorType:404,customTitle:I18N.dModule.zero_screen_err_title,customDes:I18N.dModule.zero_screen_err_des,isShowSecondaryBtn:!1,primaryClick:()=>(0,i.HM)("zh-CN","\u539F\u578B-\u5206\u4EAB\u94FE\u63A5\u9875\u9762\u4E3A\u7A7A")});const $e=new j.Sm,Fe=new URLSearchParams(location.search),qe=Ee?"preview":Fe.has("inspect")?"inspect":Fe.has("comment")?"comment":"preview";return(0,X.jsx)(j.XC.Provider,{value:$e,children:(0,X.jsx)(F.Z,{children:(0,X.jsx)(ft,{store:mt.store,previewMode:qe,projectAlike:ot,projectMeta:at,projectShare:Je})})})}}},le=L=>{let{initialData:E,designOptions:y,previewOptions:B,popupHelper:z,api:{requestProjectFullDataByAccessToken:k,requestSketchArtboardList:K,requestSketchArtboardById:Q,requestSliceByArtboardId:re,requestSliceZipByArtboardId:q,checkSharingPermission:ce,fetchProjectComment:x,fetchProjectScreenCommentThreadCountMap:te,requestProjectShare:se,requestUserCommonGuidesData:ae,updateUserCommonGuidesData:fe,fetchCreateCommentThread:ne,fetchCreateComment:ie,fetchDeleteCommentThread:Ee,fetchDeleteComment:Oe,updateProjectBasicsInfo:Re,updateComboProjectBasicsInfo:Ze},experienceLoginModalHelper:ze}=L;const{isIOSClient:nt,isStandAlone:mt}=B,ft=projectShareMock;O.config.minFS=calcMinFontSize(),(mt||nt)&&(document.documentElement.style.height="100vh");const{runnerController:ot,messageBucket:at,webpackInterface:et,PreviewApp:Je}=createPreviewRelated(getPreviewComponentByOptions(B));return setExternal({api:{requestSketchArtboardList:K,requestSketchArtboardById:Q,requestSliceByArtboardId:re,requestSliceZipByArtboardId:q,checkSharingPermission:ce,fetchProjectComment:x,fetchProjectScreenCommentThreadCountMap:te,requestUserCommonGuidesData:ae,updateUserCommonGuidesData:fe,fetchCreateCommentThread:ne,fetchCreateComment:ie,fetchDeleteCommentThread:Ee,fetchDeleteComment:Oe,updateProjectBasicsInfo:Re,updateComboProjectBasicsInfo:Ze}}),Object.assign(O,{runnerController:ot,messageBucket:at,webpackInterface:et,global:{popupHelper:z,designOptions:y,experienceLoginModalHelper:ze}}),O.webpackInterface.store.dispatch({type:"entry:init:preview:options",payload:{previewOptions:B}}),{requestData:async $e=>{var Fe;let{projectBasicCid:qe}=$e;const{user:xe,org:tt,preference:We}=E,{projectBasic:rt,projectMeta:Ke}=await requestExperienceFullDataFlat({projectBasicCid:qe});return O.webpackInterface.store.dispatch({type:"preview:set:current-projectShare",payload:{projectShare:ft}}),O.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:We||{}}}),Object.assign(O,{user:xe||{},canEditByCurrentUser:!1,org:tt||void 0}),O.webpackInterface.store.dispatch({type:"entry:state:init"}),(Fe=O.user)!=null&&Fe.id&&O.webpackInterface.store.dispatch({type:"entry:comment:rebuild:commentList"}),hideLoading(),{projectAlike:rt,projectMeta:Ke}},renderPreview:($e,Fe,qe)=>{const xe=new KeyboardManager,tt="preview";return _jsx(KeyboardManagerContext.Provider,{value:xe,children:_jsx(TooltipsManagerProvider,{children:_jsx(Je,{store:et.store,previewMode:tt,projectAlike:$e,projectMeta:Fe,projectShare:ft})})})}}};var je=e(38625),we=e(32380),Ne=e(68633),Ve=e(8990),Xe=e(16700);const Ye=L=>{let{projectMeta:E,screenGlueList:y,screenMetaList:B,screenObjectList:z,nextUpperCid:k,nextProjectMetaCid:K=getRandomProjectMetaCid()}=L;const Q=buildProjectDocument({projectMeta:E,screenGlueList:y,screenMetaList:B,screenObjectList:z}),{projectDocument:re}=remapProjectStoreLocalProjectDocument(Q,createRemapOptionForFullProjectDocument({projectMetaCid:E.cid,remapProjectMetaCid:K})),{projectMeta:q,screenGlueList:ce,screenMetaList:x,screenObjectList:te}=unbuildProjectDocument(re);return q.upper_cid=k,{projectMeta:q,screenGlueList:ce,screenMetaList:x,screenObjectList:te}};var yt=e(30336),Vt=e(67817),Zt=e(59729);const zt=async L=>{MB.safeLoading&&MB.safeLoading(I18N.dApis.save);const E=MB.getRootProject(),y={name:E.title,device:E.device,model:E.model,width:E.width,height:E.height,attr:E.attr};try{const{clientData:{upperCid:B}}=await newFlpakFromTree(window.fssDat.getFlatStore().getFlatTree(),L,y);refreshLocationHref("/proto/design/"+B)}catch(B){console.error("eTASAL",B)}};var Jt=e(7221);const qt=async L=>({...await fetchGetJSON("/api/web/v3/experience/design/initial?market_template_cid="+L),preference:{workspace:"me",link_line:!0,link_display:2,grid:!1,grid_size:10,ruler:!0,show_ruler_line:!0,show_align_line:!0,guide:!0,dashboard_guides:'["switch_workspace", "design_mode"]',app_order:"asc",theme:"light",contain_select:!1,show_tooltip:!0,show_fs_warning:!0,show_drag_mode:!0,layout_information:null,recent_icons:"[]",recent_svg_icons:"[]",icon_size:null,icon_color:null,notification_status_filter:"all",builtin_list_invisible:"[]",show_daily_tips:!0,state_link_default_transition:1,panel_link_default_transition:1,recently_used_screen_meta_icons:"[]"}}),wt=async L=>{let{projectUpperCid:E}=L;const{projectMetaList:[y],screenGlueList:B,screenMetaList:z,projectScreenObjectList:k,projectUpper:K,screenAlignList:Q}=await fetchDataMarketTemplate({projectUpperCid:E}),re=getRandomProjectMetaCid();y.upper_type="project-basic";const{projectMeta:q,screenGlueList:ce,screenMetaList:x,screenObjectList:te}=duplicateProjectMeta({nextUpperCid:E,nextProjectMetaCid:re,projectMeta:y,screenGlueList:B,screenMetaList:z,screenObjectList:k}),se=new Map;return x.forEach((ae,fe)=>{const ne=z[fe],{cid:ie,project_meta_cid:Ee}=ne,Oe="/snapshot.png?projectMetaCid="+Ee+"&screenMetaCid="+ie+"&screenStateCid=FIRST_STATE&zoomMode=thumbnail&cacheTag=cache";se.set(ae.cid,Oe)}),MB.experienceData={projectUpperCid:E,projectMeta:q,experienceSnapshotUrlMap:se},{projectMeta:q,screenGlueList:ce,screenMetaList:x,projectScreenObjectList:te,projectBasic:{...K,limitation:{collaborators:0,storage:2e3,exportable:["png","pngs","htmlzip"],encryptable:!0,inspectable:!0,slices:!0,projects:6553500,screens:6553500,commentable:!0}},screenAlignList:Q,experienceSnapshotUrlMap:se}},vt=async()=>({marketTemplateList:[],marketTemplateListMap:new Map,iconLibraryList:[],iconLibraryListMap:new Map}),Dt=L=>{const E={...L,created_at:new Date().valueOf()},y={cid:getRandomCid("p"),mtime:Date.now()/1e3,upper_cid:E.cid,upper_type:"user-combo"};return{user_combo_group:E,project_meta:y}},Yt=L=>{let{isLoggedIn:E}=L;return{requestUserAssetGroupList:()=>E?designAPI.requestUserAssetGroupList():{userAssetGroupList:[]},requestConfigurationData:designAPI.requestConfigurationData,requestConfigurationSquareTopicData:designAPI.requestConfigurationSquareTopicData,requestWorkspaceConfiguration:designAPI.requestWorkspaceConfiguration,requestConfigurationHotKeyWords:designAPI.requestConfigurationHotKeyWords,requestRecentKeywords:designAPI.requestRecentKeywords,requestDeleteRecentKeywords:designAPI.requestDeleteRecentKeywords,requestAddRecentKeywords:designAPI.requestAddRecentKeywords,requestConfigurationWorkspaceLabels:designAPI.requestConfigurationWorkspaceLabels,requestIconGroupIconDataForCid:designAPI.requestIconGroupIconDataForCid,requestFindMarketTemplates:designAPI.requestFindMarketTemplates,requestSearchResourcesData:designAPI.requestSearchResourcesData,requestResourcesDetails:designAPI.requestResourcesDetails,requestHotIcons:designAPI.requestHotIcons,requestMarketTemplateDataFromCid:designAPI.requestMarketTemplateDataFromCid,requestUpdateScreenAlign:designAPI.requestUpdateScreenAlign,requestSketchArtboardList:async()=>({artboards:[]}),requestSketchArtboardById:()=>null,requestSliceByArtboardId:async()=>({slices:[]}),requestSliceZipByArtboardId:async()=>({url:"/mock-slice.zip",status:200}),requestUserCommonGuidesData:async()=>({guide:{dashboard_guides:"",workspace_guides:'["newFeature", "videoTip", "widgetState", "pageState", "trashTip", "versioins"]',workspace_guides_version:"v2",default_team_cid:""},guide_project_template_cid:""}),updateUserCommonGuidesData:()=>null,updateUser2203GuidesData:()=>null,checkSharingPermission:async()=>(await new Promise(y=>setTimeout(y,100)),!0),fetchProjectComment:async()=>({org:null,team:null,members:[],threads:[],comments:[]}),fetchProjectScreenCommentThreadCountMap:()=>null,updateProjectBasicsInfo:()=>null,updateComboProjectBasicsInfo:()=>null,requestProjectShare,updateCurrentProjectShare:()=>null,requestMarketTemplateFullDataByCid:y=>{let{projectUpperCid:B}=y;return wt({projectUpperCid:B})},requestUserComboGroupList:y=>E?designAPI.requestUserComboGroupList(y):{userComboGroupList:[]},requestCreateUserComboGroup:y=>E?designAPI.requestCreateUserComboGroup(y):Dt(y),requestUpdateUserComboGroup:y=>E?designAPI.requestUpdateUserComboGroup(y):{user_combo_group:y},requestDeleteUserComboGroup:y=>E?designAPI.requestDeleteUserComboGroup(y):null,requestMarketTemplateDataForLibrary:()=>E?designAPI.requestMarketTemplateDataForLibrary():vt(),requestMarketTemplateItemUnused:y=>{let{marketTemplateCid:B}=y;return E?designAPI.requestMarketTemplateItemUnused({marketTemplateCid:B}):null},experienceTriggerAllSaveAfterLogin:y=>experienceTriggerAllSaveAfterLogin(y),requestUserStarredList,requestUserUsedResources,requestStarredResources,requestUnStarredResources,requestResourcesDetailData,requestRecentResourcesList,requestResourcesListForSource,requestUpdateRecentImportResources,requestResourcesListByCategory:y=>{let{category:B,keyword:z}=y;return designAPI.requestResourcesListByCategory({category:B,keyword:z})}}},$t=async L=>{let{initialData:E,previewOptions:y,api:B,projectAccessToken:z,projectEncryptedPassword:k,isPasswordRequired:K,$root:Q,projectBasicCid:re,sharing:q,password:ce}=L;const x={isDesign:!0,isExperience:!1,isLoggedExperience:!1,isOnPremises:!!E.is_on_premises,isWonderShare:!!E.is_wonder_share},{requestData:te,renderPreview:se}=initPreview({api:B,initialData:E,popupHelper:createPopupHelper(),previewOptions:y,designOptions:x,sharing:q,password:ce});K&&setTimeout(()=>previewNoAccessSaTrack("\u5BC6\u7801\u67E5\u770B-\u9700\u8F93\u5165\u5BC6\u7801"),0);const{projectAlike:ae,projectMeta:fe,projectShare:ne}=await te({projectAccessToken:z,projectEncryptedPassword:k,isPasswordRequired:K,projectBasicCid:re}),ie=location.hash||"",Ee=ie&&ie.startsWith("#screen=")&&ie.substr(8);ReactDOM.render(se(ae,fe,Ee,ne),Q)},At=async L=>{let{initialData:E,previewOptions:y,api:B,projectAccessToken:z,projectEncryptedPassword:k,isPasswordRequired:K,$root:Q,projectBasicCid:re,sharing:q,password:ce}=L;const x={isDesign:!0,isExperience:!1,isLoggedExperience:!1,isOnPremises:!!E.is_on_premises,isWonderShare:!!E.is_wonder_share},{requestData:te,renderPreview:se}=me({api:B,initialData:E,popupHelper:Te(),previewOptions:y,designOptions:x,sharing:q,password:ce});K&&setTimeout(()=>(0,je.CQ)("\u5BC6\u7801\u67E5\u770B-\u9700\u8F93\u5165\u5BC6\u7801"),0);const{projectAlike:ae,projectMeta:fe}=await te({projectAccessToken:z,projectEncryptedPassword:k,isPasswordRequired:K,projectBasicCid:re}),ne=location.hash||"",ie=ne&&ne.startsWith("#screen=")&&ne.substr(8);u.render(se(ae,fe,ie),Q)},Xt=async L=>{let{initialData:E,previewOptions:y,$root:B,projectBasicCid:z}=L;const{user:k}=E,K=!!k,Q={isDesign:!0,isExperience:!K,isLoggedExperience:K,isOnPremises:!!E.is_on_premises,isWonderShare:!!E.is_wonder_share},re=createExperienceAPI({isLoggedIn:K}),{requestData:q,renderPreview:ce}=initExperiencePreview({api:re,initialData:E,popupHelper:createPopupHelper(),previewOptions:y,designOptions:Q,experienceLoginModalHelper}),{projectAlike:x,projectMeta:te}=await q({projectBasicCid:z}),se=location.hash||"",ae=se&&se.startsWith("#screen=")&&se.substr(8);ReactDOM.render(ce(x,te,ae),B)};var ge=e(20018),Ot=e(7627),oe=e.n(Ot),ct=e(73376),Tt=e(62737),it=e(21426),De=e(1e3),Lt=e(27004),lt=e(6725),dt=e(43980),gt=e(27940),pt=e(4091),ke=e(65155);const bt=L=>/\/app\/experience\//.test(L),It=L=>/\/app\/design\//.test(L),ut=L=>/\/app\//.test(L)&&!bt(L)&&!It(L);class Bt extends w.PureComponent{constructor(E){var y;super(E),y=this,(0,ge.Z)(this,"mousewheelHandle",x=>{const te=x.deltaX||x.wheelDeltaX;if(!te)return;const se=document.getElementById("workspace"),ae=se.scrollLeft+se.offsetWidth===se.scrollWidth&&te>0,fe=se.scrollLeft===0&&te<0;(ae||fe)&&x.preventDefault()}),(0,ge.Z)(this,"playDesignPageLeaveAnimation",function(x){return x===void 0&&(x=200),y.setState({isDesignCollapse:!0}),new Promise(te=>setTimeout(te,x))}),(0,ge.Z)(this,"handleBackButtonClick",async()=>{var x;if((0,ke._$)()){(0,ke.gB)(ke.Kk.enterPreview);return}const{initialData:{goback_url:te}}=this.props;await this.playDesignPageLeaveAnimation(),location.replace(te||"/dashboard/"+(((x=MB.currentOrg)==null?void 0:x.cid)||"me"))}),(0,ge.Z)(this,"handlePlayButtonClick",async(x,te,se)=>{let{isInspect:ae,isComment:fe}=se;await this.playDesignPageLeaveAnimation();const ie={previewMode:ae?"inspect":fe?"comment":"preview",projectCid:x,screenCid:te};this.setState({isPreview:!0,previewData:ie})}),(0,ge.Z)(this,"handleDesignDidMount",()=>{this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,ge.Z)(this,"handleBackToDesign",()=>{this.setState({isPreview:!1,isDesignCollapse:!1})}),(0,ge.Z)(this,"keyboardManager",new j.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,previewData:null,projectAlike:null,projectMeta:null};const{popupHelper:B,designOptions:z,api:k,initialData:K,prepareProjectUpper:Q}=E,{requestData:re,renderDesign:q,renderPreview:ce}=(0,it.a7)({api:k,popupHelper:B,experienceLoginModalHelper:we.m,initialData:K,designOptions:z,prepareProjectUpper:Q,onBackButtonClick:this.handleBackButtonClick,onPlayButtonClick:this.handlePlayButtonClick,onComponentDidMount:this.handleDesignDidMount});this.requestData=re,this.renderDesign=q}componentDidMount(){const E=performance.now(),{projectUpperCid:y,initialData:B,designOptions:z}=this.props;let k=!1;location.pathname.includes((0,pt.S3)("review"))&&(k=!0),Promise.all([this.requestData(y,k),new Promise(Q=>setTimeout(Q,800))]).then(Q=>{let[{projectAlike:re,projectMeta:q}]=Q;this.setState({projectAlike:re,projectMeta:q},()=>{this.setState({isDataLoaded:!0})});const ce=performance.now(),x=Math.ceil((ce-E)/1e3);typeof De.U1=="function"&&(0,De.U1)("load_success_project",{load_time:x,project_name:B.projectName,project_cid:y,project_type:"\u539F\u578B V8",success:1,source:z.isExperience?"\u7D20\u6750\u5E7F\u573A-\u7F16\u8F91\u539F\u578B":window.opener?document.referrer&&ut(new URL(document.referrer))?"hover \u7F16\u8F91\u6309\u94AE":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u7F16\u8F91":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u65B0\u6807\u7B7E\u9875\u7F16\u8F91",preview_type:"\u7F16\u8F91\u6A21\u5F0F"}),x>30&&(0,dt.uT)("\u7F16\u8F91\u533A----\u9879\u76EE\u6253\u5F00\u8D85\u8FC730s"),Lt.x.enterProtoTrack()}).catch(Q=>{console.error("[ExampleApp] requestData failed",Q),typeof De.U1=="function"&&(0,De.U1)("load_success_project",{project_type:"\u539F\u578B V8",success:0,error_type:Q,preview_type:"\u7F16\u8F91\u6A21\u5F0F"})});const K=document.getElementById("workspace");K&&K.addEventListener("mousewheel",this.mousewheelHandle)}componentWillUnmount(){const E=document.getElementById("workspace");E&&E.removeEventListener("mousewheel",this.mousewheelHandle,{capture:!0})}render(){const{screenCid:E,designOptions:y}=this.props,{isLoading:B,isDataLoaded:z,isDesignCollapse:k,isPreview:K,previewData:Q,projectAlike:re,projectMeta:q}=this.state,{renderDesign:ce,handleBackToDesign:x,renderPreview:te}=this,{isWonderShare:se}=y;let ae=!1;return location.pathname.includes((0,pt.S3)("review"))&&(ae=!0),(0,X.jsx)(j.XC.Provider,{value:this.keyboardManager,children:(0,X.jsx)(F.Z,{children:(0,X.jsxs)(lt.X,{className:"example-app",children:[z&&(0,X.jsx)(w.Fragment,{children:(0,X.jsx)(Tt.Z,{screenCid:E,isCollapse:k,projectAlike:re,projectMeta:q,renderDesign:ce,isFromReadOnly:ae})}),B&&(0,X.jsx)(ct.Z,{className:"mb-loading",isNormal:se})]})})})}}(0,ge.Z)(Bt,"propTypes",{api:oe().object,initialData:oe().object,projectUpperCid:oe().string,screenCid:oe().string,designOptions:oe().object,prepareProjectUpper:oe().func,popupHelper:oe().object});class Rt extends w.PureComponent{constructor(E){var y;super(E),y=this,(0,ge.Z)(this,"playDesignPageLeaveAnimation",function(ne){return ne===void 0&&(ne=200),y.setState({isDesignCollapse:!0}),new Promise(ie=>setTimeout(ie,ne))}),(0,ge.Z)(this,"handleBackButtonClick",async()=>{var ne;if((0,ke._$)()){(0,ke.gB)(ke.Kk.enterPreview);return}const{initialData:{goback_url:ie}}=this.props;await this.playDesignPageLeaveAnimation(),location.replace(ie||"/dashboard/"+(((ne=MB.currentOrg)==null?void 0:ne.cid)||"me"))}),(0,ge.Z)(this,"handlePlayButtonClick",async(ne,ie,Ee)=>{let{isInspect:Oe,isComment:Re}=Ee;await this.playDesignPageLeaveAnimation();const ze={previewMode:Oe?"inspect":Re?"comment":"preview",projectCid:ne,screenCid:ie};this.setState({isPreview:!0,previewData:ze})}),(0,ge.Z)(this,"handleDesignDidMount",()=>{this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,ge.Z)(this,"handleBackToDesign",()=>{this.setState({isPreview:!1,isDesignCollapse:!1})}),(0,ge.Z)(this,"keyboardManager",new j.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,previewData:null,projectAlike:null,projectMeta:null,projectShare:void 0};const{popupHelper:B,designOptions:z,api:k,initialData:K,prepareProjectUpper:Q,sharing:re,password:q,isHtmlZip:ce,isSquare:x,isEmbedV2:te}=E,se=!(ce||x||te),{requestData:ae,renderDesign:fe}=(0,it.nr)({api:k,popupHelper:B,experienceLoginModalHelper:we.m,initialData:K,designOptions:z,prepareProjectUpper:Q,onBackButtonClick:this.handleBackButtonClick,onPlayButtonClick:this.handlePlayButtonClick,onComponentDidMount:this.handleDesignDidMount,sharing:re,password:q,showGuide:se});this.requestData=ae,this.renderDesign=fe}componentDidMount(){const E=performance.now(),{projectUpperCid:y,initialData:B,designOptions:z}=this.props;let k=!1;location.pathname.includes((0,pt.S3)("review"))&&(k=!0),Promise.all([this.requestData(y,k),new Promise(K=>setTimeout(K,800))]).then(K=>{let[{projectAlike:Q,projectMeta:re,projectShare:q}]=K;this.setState({projectAlike:Q,projectMeta:re,projectShare:q},()=>{this.setState({isDataLoaded:!0})});const ce=performance.now(),x=Math.ceil((ce-E)/1e3);typeof De.U1=="function"&&(0,De.U1)("load_success_project",{load_time:x,project_name:B.projectName,project_cid:y,project_type:"\u539F\u578B V8",success:1,source:z.isExperience?"\u7D20\u6750\u5E7F\u573A-\u7F16\u8F91\u539F\u578B":window.opener?document.referrer&&ut(new URL(document.referrer))?"hover \u7F16\u8F91\u6309\u94AE":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u7F16\u8F91":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u65B0\u6807\u7B7E\u9875\u7F16\u8F91",preview_type:"\u53EA\u8BFB\u6A21\u5F0F"}),x>30&&(0,dt.uT)("\u7F16\u8F91\u533A----\u9879\u76EE\u6253\u5F00\u8D85\u8FC730s")}).catch(K=>{console.error("[ExampleApp] requestData failed",K),typeof De.U1=="function"&&(0,De.U1)("load_success_project",{project_type:"\u539F\u578B V8",success:0,error_type:K,preview_type:"\u53EA\u8BFB\u6A21\u5F0F"})})}render(){const{screenCid:E,designOptions:y,isHtmlZip:B}=this.props,{isLoading:z,isDataLoaded:k,isDesignCollapse:K,projectAlike:Q,projectMeta:re,projectShare:q}=this.state,{renderDesign:ce}=this,{isWonderShare:x}=y;return q!=null&&q.screen_visible_switch&&(q==null?void 0:q.screen_visible_list.length)===0?(0,X.jsx)(C.Z,{errorType:404,customTitle:I18N.dModule.zero_screen_err_title,customDes:I18N.dModule.zero_screen_err_des,isShowSecondaryBtn:!1,primaryClick:()=>backToHomePageWithSaTrack("zh-CN","\u539F\u578B-\u5206\u4EAB\u94FE\u63A5\u9875\u9762\u4E3A\u7A7A")}):(0,X.jsx)(j.XC.Provider,{value:this.keyboardManager,children:(0,X.jsx)(F.Z,{children:(0,X.jsxs)(lt.X,{className:"example-app",children:[k&&(0,X.jsx)(w.Fragment,{children:(0,X.jsx)(gt.R,{screenCid:E,isCollapse:K,projectAlike:Q,projectMeta:re,renderDesign:ce,projectShare:q,isHtmlZip:B})}),z&&(0,X.jsx)(ct.Z,{className:"mb-loading",isNormal:x})]})})})}}(0,ge.Z)(Rt,"propTypes",{api:oe().object,initialData:oe().object,projectUpperCid:oe().string,screenCid:oe().string,designOptions:oe().object,prepareProjectUpper:oe().func,popupHelper:oe().object,sharing:oe().object,password:oe().string,isHtmlZip:oe().bool,isSquare:oe().bool,isEmbedV2:oe().bool});class l extends w.PureComponent{constructor(E){var y;super(E),y=this,(0,ge.Z)(this,"playDesignPageLeaveAnimation",function(ie){return ie===void 0&&(ie=200),y.setState({isDesignCollapse:!0}),new Promise(Ee=>setTimeout(Ee,ie))}),(0,ge.Z)(this,"handleBackButtonClick",async()=>{var ie;if((0,ke._$)()){(0,ke.gB)(ke.Kk.enterPreview);return}const{initialData:{goback_url:Ee}}=this.props;await this.playDesignPageLeaveAnimation(),location.replace(Ee||"/dashboard/"+(((ie=MB.currentOrg)==null?void 0:ie.cid)||"me"))}),(0,ge.Z)(this,"handlePlayButtonClick",async(ie,Ee,Oe)=>{let{isInspect:Re,isComment:Ze}=Oe;await this.playDesignPageLeaveAnimation();const nt={previewMode:Re?"inspect":Ze?"comment":"preview",projectCid:ie,screenCid:Ee};this.setState({isPreview:!0,previewData:nt})}),(0,ge.Z)(this,"handleDesignDidMount",()=>{this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,ge.Z)(this,"handleBackToDesign",()=>{this.setState({isPreview:!1,isDesignCollapse:!1})}),(0,ge.Z)(this,"keyboardManager",new j.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,previewData:null,projectAlike:null,projectMeta:null,projectShare:void 0};const{popupHelper:B,designOptions:z,api:k,initialData:K,prepareProjectUpper:Q,sharing:re,password:q,isHtmlZip:ce,isSquare:x,isEmbedV2:te,projectVersion:se}=E,ae=!(ce||x||te),{requestData:fe,renderDesign:ne}=(0,it.oI)({api:k,popupHelper:B,experienceLoginModalHelper:we.m,initialData:K,designOptions:z,prepareProjectUpper:Q,onBackButtonClick:this.handleBackButtonClick,onPlayButtonClick:this.handlePlayButtonClick,onComponentDidMount:this.handleDesignDidMount,sharing:re,password:q,showGuide:ae,projectVersion:se});this.requestData=fe,this.renderDesign=ne,MB.isVersion=!0}componentDidMount(){const E=performance.now(),{projectUpperCid:y,initialData:B,designOptions:z}=this.props;let k=!1;location.pathname.includes((0,pt.S3)("review"))&&(k=!0),Promise.all([this.requestData(y,k),new Promise(K=>setTimeout(K,800))]).then(K=>{let[{projectAlike:Q,projectMeta:re,projectShare:q}]=K;this.setState({projectAlike:Q,projectMeta:re,projectShare:q},()=>{this.setState({isDataLoaded:!0})});const ce=performance.now(),x=Math.ceil((ce-E)/1e3);typeof De.U1=="function"&&(0,De.U1)("load_success_project",{load_time:x,project_name:B.projectName,project_cid:y,project_type:"\u539F\u578B V8",success:1,source:z.isExperience?"\u7D20\u6750\u5E7F\u573A-\u7F16\u8F91\u539F\u578B":window.opener?document.referrer&&ut(new URL(document.referrer))?"hover \u7F16\u8F91\u6309\u94AE":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u7F16\u8F91":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u65B0\u6807\u7B7E\u9875\u7F16\u8F91",preview_type:"\u7248\u672C\u7BA1\u7406"}),x>30&&(0,dt.uT)("\u7F16\u8F91\u533A----\u9879\u76EE\u6253\u5F00\u8D85\u8FC730s")}).catch(K=>{console.error("[ExampleApp] requestData failed",K),typeof De.U1=="function"&&(0,De.U1)("load_success_project",{project_type:"\u539F\u578B V8",success:0,error_type:K,preview_type:"\u7248\u672C\u7BA1\u7406"})})}render(){const{screenCid:E,designOptions:y,isHtmlZip:B}=this.props,{isLoading:z,isDataLoaded:k,isDesignCollapse:K,projectAlike:Q,projectMeta:re,projectShare:q}=this.state,{renderDesign:ce}=this,{isWonderShare:x}=y;return q!=null&&q.screen_visible_switch&&(q==null?void 0:q.screen_visible_list.length)===0?(0,X.jsx)(C.Z,{errorType:404,customTitle:I18N.dModule.zero_screen_err_title,customDes:I18N.dModule.zero_screen_err_des,isShowSecondaryBtn:!1,primaryClick:()=>backToHomePageWithSaTrack("zh-CN","\u539F\u578B-\u5206\u4EAB\u94FE\u63A5\u9875\u9762\u4E3A\u7A7A")}):(0,X.jsx)(j.XC.Provider,{value:this.keyboardManager,children:(0,X.jsx)(F.Z,{children:(0,X.jsxs)(lt.X,{className:"example-app",children:[k&&(0,X.jsx)(w.Fragment,{children:(0,X.jsx)(gt.R,{screenCid:E,isCollapse:K,projectAlike:Q,projectMeta:re,renderDesign:ce,projectShare:q,isHtmlZip:B})}),z&&(0,X.jsx)(ct.Z,{className:"mb-loading",isNormal:x})]})})})}}(0,ge.Z)(l,"propTypes",{api:oe().object,initialData:oe().object,projectUpperCid:oe().string,screenCid:oe().string,designOptions:oe().object,prepareProjectUpper:oe().func,popupHelper:oe().object,sharing:oe().object,password:oe().string,isHtmlZip:oe().bool,isSquare:oe().bool,isEmbedV2:oe().bool,projectVersion:oe().string});class f extends w.PureComponent{constructor(E){var y;super(E),y=this,(0,ge.Z)(this,"playDesignPageLeaveAnimation",function(ne){return ne===void 0&&(ne=200),y.setState({isDesignCollapse:!0}),new Promise(ie=>setTimeout(ie,ne))}),(0,ge.Z)(this,"handleBackButtonClick",async()=>{var ne;if((0,ke._$)()){(0,ke.gB)(ke.Kk.enterPreview);return}const{initialData:{goback_url:ie}}=this.props;await this.playDesignPageLeaveAnimation(),location.replace(ie||"/dashboard/"+(((ne=MB.currentOrg)==null?void 0:ne.cid)||"me"))}),(0,ge.Z)(this,"handlePlayButtonClick",async(ne,ie,Ee)=>{let{isInspect:Oe,isComment:Re}=Ee;await this.playDesignPageLeaveAnimation();const ze={previewMode:Oe?"inspect":Re?"comment":"preview",projectCid:ne,screenCid:ie};this.setState({isPreview:!0,previewData:ze})}),(0,ge.Z)(this,"handleDesignDidMount",()=>{this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,ge.Z)(this,"handleBackToDesign",()=>{this.setState({isPreview:!1,isDesignCollapse:!1})}),(0,ge.Z)(this,"keyboardManager",new j.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,previewData:null,projectAlike:null,projectMeta:null};const{popupHelper:B,designOptions:z,api:k,initialData:K,prepareProjectUpper:Q,sharing:re,password:q,isHtmlZip:ce,isSquare:x,isEmbedV2:te}=E,se=!(ce||x||te),{requestData:ae,renderDesign:fe}=(0,it.lS)({api:k,popupHelper:B,experienceLoginModalHelper:we.m,initialData:K,designOptions:z,prepareProjectUpper:Q,onBackButtonClick:this.handleBackButtonClick,onPlayButtonClick:this.handlePlayButtonClick,onComponentDidMount:this.handleDesignDidMount,sharing:re,password:q,showGuide:se});this.requestData=ae,this.renderDesign=fe}componentDidMount(){const E=performance.now(),{projectUpperCid:y,initialData:B,designOptions:z}=this.props;Promise.all([this.requestData(y),new Promise(k=>setTimeout(k,800))]).then(k=>{let[{projectAlike:K,projectMeta:Q}]=k;this.setState({projectAlike:K,projectMeta:Q},()=>{this.setState({isDataLoaded:!0})});const re=performance.now(),q=Math.ceil((re-E)/1e3);typeof De.U1=="function"&&(0,De.U1)("load_success_project",{load_time:q,project_name:B.projectName,project_cid:y,project_type:"\u539F\u578B V8",success:1,source:z.isExperience?"\u7D20\u6750\u5E7F\u573A-\u7F16\u8F91\u539F\u578B":window.opener?document.referrer&&ut(new URL(document.referrer))?"hover \u7F16\u8F91\u6309\u94AE":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u7F16\u8F91":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u65B0\u6807\u7B7E\u9875\u7F16\u8F91"}),q>30&&(0,dt.uT)("\u7F16\u8F91\u533A----\u9879\u76EE\u6253\u5F00\u8D85\u8FC730s")}).catch(k=>{console.error("[ExampleApp] requestData failed",k),typeof De.U1=="function"&&(0,De.U1)("load_success_project",{project_type:"\u539F\u578B V8",success:0,error_type:k})})}render(){const{screenCid:E,designOptions:y,isHtmlZip:B}=this.props,{isLoading:z,isDataLoaded:k,isDesignCollapse:K,projectAlike:Q,projectMeta:re}=this.state,{renderDesign:q}=this,{isWonderShare:ce}=y;return(0,X.jsx)(j.XC.Provider,{value:this.keyboardManager,children:(0,X.jsx)(F.Z,{children:(0,X.jsxs)(lt.X,{className:"example-app",children:[k&&(0,X.jsx)(w.Fragment,{children:(0,X.jsx)(gt.R,{screenCid:E,isCollapse:K,projectAlike:Q,projectMeta:re,renderDesign:q,isHtmlZip:B})}),z&&(0,X.jsx)(ct.Z,{className:"mb-loading",isNormal:ce})]})})})}}(0,ge.Z)(f,"propTypes",{api:oe().object,initialData:oe().object,projectUpperCid:oe().string,screenCid:oe().string,designOptions:oe().object,prepareProjectUpper:oe().func,popupHelper:oe().object,sharing:oe().object,password:oe().string,isHtmlZip:oe().bool,isSquare:oe().bool,isEmbedV2:oe().bool});var b=e(92029);const H="hzv3",de="pid",Me="pbj",Ie="psol",Le="psv2am",Ue=()=>isBasicObject(window[TAG_HTML_ZIP_V3]),Ae=()=>(0,b.hK)(window[H],"missing htmlZipV3 data"),Be=async()=>(Ae(),window[H][de]),be=async()=>{Ae();const{project_basic:L,screen_aligns:E,project_metas:y,screen_glues:B,screen_metas:z}=window[H][Me],k=window[H][Ie];return{projectBasic:L,screenAlignList:E,projectMetaList:y,screenGlueList:B,screenMetaList:z,projectScreenObjectList:k}},Qe=async()=>(Ae(),{artboards:Object.values(window[H][Le]).map(L=>{let{artboard:E}=L;return E})}),st=async L=>(Ae(),window[H][Le][L]),_t=async()=>{Ae();const{project_share:L}=window[TAG_HTML_ZIP_V3][TAG_PROJECT_BASIC_JSON];return{projectShare:L}},er={requestPreviewInitialData:Be,requestProjectFullDataByAccessToken:async L=>{let{projectEncryptedPassword:E}=L;const{projectMetaList:[y],screenGlueList:B,screenMetaList:z,projectScreenObjectList:k,projectBasic:K,screenAlignList:Q}=await be(),{password:re}=K;if(re&&E!==re)throw new Error("error password");return{projectMeta:y,screenGlueList:B,screenMetaList:z,projectScreenObjectList:k,projectBasic:K,screenAlignList:Q}},requestSketchArtboardList:Qe,requestSketchArtboardById:st,requestProjectShare:async L=>({projectShare:{screen_visible_switch:!1,screen_visible_list:[]}}),fetchDataProjectBasic:be};var tr=e(61134),cr=e(54152),ir=e(70956),lr=e(47518);e.p="./mb-proto2/";const dr=document.getElementById("workspace"),pr=async()=>{var L;const E=c({isHTMLZip:!0});(0,o.tq)()&&$("body").addClass("mobile");let y=await(0,p.vn)();const{isOnPremises:B,isWonderShare:z,projectUpper:k,projectMeta:K}=y;y={...y,projectName:k.name,is_on_premises:B,is_wonder_share:z,project_basic:k,project_meta:K};const Q=(0,lr.D)({project:k}),{locale:re,projectName:q,is_on_premises:ce,is_wonder_share:x}=y,te=await(0,cr.Q)(re);document.title=""+(0,ir.FQ)(k.name||k.title),!ce&&(0,De.wb)(),(0,tr.N_)("isOnPremises",!!ce),(0,tr.N_)("isWonderShare",!!x);const{projectAccessToken:se,projectEncryptedPassword:ae,isPasswordRequired:fe}=y,ne=(L=new URLSearchParams(location.search))==null?void 0:L.get("view_mode"),ie=window.HZv5_PREVIEW_MODE||"";if(ne?ne==="device":ie==="device")(0,m.v)(te,q),await At({initialData:y,previewOptions:E,api:er,projectAccessToken:se,projectEncryptedPassword:ae,isPasswordRequired:fe,sharing:Q,$root:document.getElementById("workspace")});else{const Ze={isDesign:!0,isExperience:!1,isLoggedExperience:!1,isOnPremises:!!ce,isWonderShare:!!x,guideType:void 0};u.render((0,X.jsx)(f,{initialData:y,designOptions:Ze,api:er,projectAccessToken:se,projectEncryptedPassword:ae,isPasswordRequired:fe,sharing:Q,isHtmlZip:!0}),dr)}};document.addEventListener("DOMContentLoaded",async()=>{await pr()})},78467:(S,g,e)=>{"use strict";e.d(g,{HM:()=>a,mB:()=>r});var u=e(63077),p=e(45090),C=e(46198),w=e(48589),n=e(25797),P=e(35269);const _=document.getElementById("workspace"),t=(0,p.vJ)([".btn-list{display:flex;flex-direction:row-reverse;justify-content:center;.primary{margin-left:20px;}.regular{margin-left:0 !important;}}"]),v=(o,c,d)=>{ReactDOM.render(_jsxs(_Fragment,{children:[_jsx(t,{}),_jsx(CrashedPage,{errorType:o.status||401,customTitle:c,customDes:d})]}),_)},r=async o=>{var c;let d,M,i,D,I;try{({user:I}=await(0,n.EE)("/api/web/v3/initial"))}catch(V){console.warn("[crashedPageWithUser]",V),d=()=>{C.render((0,P.jsx)(w.Z,{isOpen:!0,type:"signin",source:"proto-org-preview",onConfirm:()=>location.reload()}),document.getElementById("IBOT_MODAL_ROOT"))},M="\u767B\u5F55",D=()=>{C.render((0,P.jsx)(w.Z,{isOpen:!0,type:"signup",source:"proto-org-preview",onConfirm:()=>location.reload()}),document.getElementById("IBOT_MODAL_ROOT"))},i="\u6CE8\u518C",I={}}C.render((0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(t,{}),(0,P.jsx)(u.Z,{errorType:o.status||401,identity:1,account:(c=I)==null?void 0:c.email,primaryBtnText:M,primaryBtnClick:d,secondaryBtnText:i,secondaryBtnClick:D})]}),_)},a=(o,c)=>{let d="";o==="zh-CN"?d="/":o==="jp"?d="https://mockitt.wondershare.jp":d="https://mockitt.wondershare.com",location.replace(d)}},48290:(S,g,e)=>{"use strict";e.d(g,{C:()=>C,S:()=>w});var u=e(1372);const p=n=>("0"+parseInt(n).toString(16)).slice(-2),C=n=>!n||n==="rgba(0, 0, 0, 0)"||n==="transparent"?"transparent":(n=n.match(/^rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/),"#"+p(n[1])+p(n[2])+p(n[3])),w=n=>(0,u.LW)((0,u.LS)(n))},1e3:(S,g,e)=>{"use strict";e.d(g,{Mn:()=>r,U1:()=>w,tv:()=>P,wb:()=>C});var u=e(37931);const p=function(){if(!window.dataLayer||!Array.isArray(window.dataLayer))return!1;const a=arguments.length<=0?void 0:arguments[0];let o=arguments.length<=1?void 0:arguments[1];Object.prototype.toString.call(o)!=="[object Object]"&&(console.warn("ga data's type is not object, and data is",o),o={});const c={};Object.entries(o).forEach(d=>{let[M,i]=d;c["mockitt_"+M]=i}),window.dataLayer.push({event:"saas_interaction",event_action:a,...c})},C=ENV.NO_TRACK?()=>{}:u.wb,w=ENV.NO_TRACK?()=>{}:function(){(0,u.U1)(...arguments)},n=ENV.NO_TRACK?()=>{}:a=>{let{paramName:o,defaultValue:c,valueType:d,callback:M}=a;return(0,u.be)({paramName:o,defaultValue:c,valueType:d,callback:M})},P=ENV.NO_TRACK?()=>{}:u.pj,_=ENV.IS_WONDER_SHARE?a=>{if(!window.gtag)return console.error("gtag is not a function");window.gtag("config","UA-4839360-64",{user_id:a,transport_type:"beacon"})}:()=>{},t={"https://mockittapp.wondershare.com/proto":"B3-V8\u539F\u578B\u5185\u5206\u4EAB"},v=()=>{const a=Object.keys(t).sort((o,c)=>c.length-o.length);return t[a.find(o=>window.location.href.indexOf(o)!==-1)]},r=async a=>{try{await fetch("https://mockittapp.wondershare.com/invite_track?entry="+v()+"&entry_term="+a)}catch(o){console.error(o)}}},70423:(S,g,e)=>{"use strict";e.d(g,{B0:()=>o,CL:()=>n,Dt:()=>v,ED:()=>C,IF:()=>c,Md:()=>d,Rv:()=>w,V5:()=>p,_j:()=>M,d:()=>u,i7:()=>P,li:()=>i,tq:()=>t,vU:()=>_});const u=()=>window.MB_DESKTOP_VERSION||window.isElectron||/Electron/i.test(navigator.userAgent),p=()=>/(Macintosh)/i.test(navigator.userAgent),C=()=>/(Windows)/i.test(navigator.userAgent),w=()=>/(Lark)/i.test(navigator.userAgent),n=()=>/MicroMessenger/i.test(navigator.userAgent),P=()=>/Chrome/i.test(navigator.userAgent),_=()=>/Firefox/i.test(navigator.userAgent),t=()=>/(iPod|iPhone|iPad|Android|MobileClient)/.test(navigator.userAgent),v=()=>/Android/i.test(navigator.userAgent),r=()=>/(iPad)/.test(navigator.userAgent),a=()=>/(iPod|iPhone|iPad)/.test(navigator.userAgent),o=()=>!!(window.webkit&&window.webkit.messageHandlers),c=()=>navigator.standalone,d=()=>/\/uichina$/.test(location.pathname),M=()=>/\/forum$/.test(location.pathname),i=()=>/(MobileClient)/.test(navigator.userAgent)},82888:S=>{(function(g){var e,u={},p={16:!1,18:!1,17:!1,91:!1},C="all",w={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},n={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220,numpad_subtract:109,numpad_add:107,numpad_0:96,numpad_1:97,numpad_2:98},P=function(s){return n[s]||s.toUpperCase().charCodeAt(0)},_=[];for(e=1;e<20;e++)n["f"+e]=111+e;function t(s,m){for(var j=s.length;j--;)if(s[j]===m)return j;return-1}function v(s,m){if(s.length!=m.length)return!1;for(var j=0;j<s.length;j++)if(s[j]!==m[j])return!1;return!0}var r={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function a(s){for(e in p)p[e]=s[r[e]]}function o(s){var m,j,F,ue,J,Pe;if(m=s.keyCode,t(_,m)==-1&&_.push(m),(m==93||m==224)&&(m=91),m in p){p[m]=!0;for(F in w)w[F]==m&&(M[F]=!0);return}if(a(s),!!M.filter.call(this,s)&&m in u){for(Pe=h(),ue=0;ue<u[m].length;ue++)if(j=u[m][ue],j.scope==Pe||j.scope=="all"){J=j.mods.length>0;for(F in p)(!p[F]&&t(j.mods,+F)>-1||p[F]&&t(j.mods,+F)==-1)&&(J=!1);(j.mods.length==0&&!p[16]&&!p[18]&&!p[17]&&!p[91]||J)&&(M.track.call(this,j),j.method(s,j)===!1&&(s.preventDefault?s.preventDefault():s.returnValue=!1,s.stopPropagation&&s.stopPropagation(),s.cancelBubble&&(s.cancelBubble=!0)))}}}function c(s){var m=s.keyCode,j,F=t(_,m);if(F>=0&&_.splice(F,1),(m==93||m==224)&&(m=91),m in p){p[m]=!1;for(j in w)w[j]==m&&(M[j]=!1)}}function d(){for(e in p)p[e]=!1;for(e in w)M[e]=!1}function M(s,m,j){var F,ue;F=T(s),j===void 0&&(j=m,m="all");for(var J=0;J<F.length;J++)ue=[],s=F[J].split("+"),s.length>1&&(ue=G(s),s=[s[s.length-1]]),s=s[0],s=P(s),s in u||(u[s]=[]),u[s].push({shortcut:F[J],scope:m,method:j,key:F[J],mods:ue})}function i(s,m){var j,F,ue=[],J,Pe,Se;for(j=T(s),Pe=0;Pe<j.length;Pe++){if(F=j[Pe].split("+"),F.length>1&&(ue=G(F)),s=F[F.length-1],s=P(s),m===void 0&&(m=h()),!u[s])return;for(J=0;J<u[s].length;J++)Se=u[s][J],Se.scope===m&&v(Se.mods,ue)&&(u[s][J]={})}}function D(s){return typeof s=="string"&&(s=P(s)),t(_,s)!=-1}function I(){return _.slice(0)}function V(s){var m=(s.target||s.srcElement).tagName;return!(m=="INPUT"||m=="SELECT"||m=="TEXTAREA")}function W(s){}for(e in w)M[e]=!1;function Y(s){C=s||"all"}function h(){return C||"all"}function A(s){var m,j,F;for(m in u)for(j=u[m],F=0;F<j.length;)j[F].scope===s?j.splice(F,1):F++}function T(s){var m;return s=s.replace(/\s/g,""),m=s.split(","),m[m.length-1]==""&&(m[m.length-2]+=","),m}function G(s){for(var m=s.slice(0,s.length-1),j=0;j<m.length;j++)m[j]=w[m[j]];return m}function R(s,m,j){s.addEventListener?s.addEventListener(m,j,!1):s.attachEvent&&s.attachEvent("on"+m,function(){j(window.event)})}R(document,"keydown",function(s){o(s)}),R(document,"keyup",c),R(window,"focus",d);var U=g.key;function N(){var s=g.key;return g.key=U,s}g.key=M,g.key.setScope=Y,g.key.getScope=h,g.key.deleteScope=A,g.key.filter=V,g.key.isPressed=D,g.key.getPressedKeyCodes=I,g.key.noConflict=N,g.key.unbind=i,g.key.track=W,S.exports=M})(window)},30336:(S,g,e)=>{"use strict";e.d(g,{lA:()=>r});var u=e(27444),p=e(48736),C=e(32449),w=e(38371),n=e(21989);const P=async h=>{let{projectMetaCid:A,projectMetaType:T,screenMetaCidList:G,projectBasicEncryptedPassword:R,accessToken:U=""}=h;if(G.length===0)return[];const N="/project-buffer/"+(0,C.bL)(T)+"/all/"+A+"?password="+R+"&access_token="+U,s=await(0,n.n3)(N,{localKeyList:G});return await(0,p.Of)({projectBufferData:s,parseConcatGzipDataToObjectList:w._D,projectMetaType:T})},_=async h=>{let{projectMetaList:A,screenMetaList:T,projectBasicEncryptedPassword:G="",accessToken:R=""}=h;const U=[];for(const N of A){const s=T.filter(j=>j.project_meta_cid===N.cid).map(j=>j.cid);s.length>2048&&console.warn("[fdPSOL] big proj: "+s.length);const m=(0,u.eO)(s,1024);for(const j of m)U.push(...await P({projectMetaCid:N.cid,projectMetaType:N.type,screenMetaCidList:j,projectBasicEncryptedPassword:G,accessToken:R}))}return U},t=async h=>{let{userLocale:A}=h;const{user_combo_groups:T,screen_aligns:G,project_metas:R,screen_glues:U,screen_metas:N}=await fetchGetJSON("/api/library/v3/project_upper/user_combo_groups");console.log("[fdUSG] pm#"+R.length+" sg#"+U.length+" sm#"+N.length+" | ucg#"+T.length+" sa#"+G.length);const s=await _({projectMetaList:R,screenMetaList:N});return{userComboGroupList:T,screenAlignList:G,projectMetaList:R,screenGlueList:U,screenMetaList:N,projectScreenObjectList:s}},v=async h=>{let{projectBasicCid:A,userLocale:T}=h;const{project_basic:G,screen_aligns:R,project_metas:U,screen_glues:N,screen_metas:s}=await fetchGetJSON("/api/upper/web_v1/basics/"+A);console.log("[fdPB] pm#"+U.length+" sg#"+N.length+" sm#"+s.length+" | sa#"+R.length);const m=await _({projectMetaList:U,screenMetaList:s});return{projectBasic:G,screenAlignList:R,projectMetaList:U,screenGlueList:N,screenMetaList:s,projectScreenObjectList:m}},r=async h=>{let{projectBasicAccessToken:A,projectBasicEncryptedPassword:T="",userLocale:G,projectVersion:R}=h;const{project_basic:U,screen_aligns:N,project_metas:s,screen_glues:m,screen_metas:j}=await(0,n.EE)("/api/upper/web_v1/basics/"+A+"?password="+T+(R?"&version="+R:"")),F=m.find(Pe=>Pe.type===C._H.PROJECT_TRASHCAN),ue=F?j.filter(Pe=>Pe.screen_glue_cid!==F.cid):j;console.log("[fdPB+] pm#"+s.length+" sg#"+m.length+" sm#"+j.length+"/"+ue.length+" | sa#"+N.length);const J=await _({projectMetaList:s,screenMetaList:ue,projectBasicEncryptedPassword:T,accessToken:A});return{projectBasic:U,screenAlignList:N,projectMetaList:s,screenGlueList:m,screenMetaList:ue,projectScreenObjectList:J}},a=async h=>{let{projectBasicAccessToken:A,projectBasicEncryptedPassword:T="",userLocale:G}=h;const{project_basic:R,screen_aligns:U,project_metas:N,screen_glues:s,screen_metas:m}=await fetchGetJSON("/api/upper/web_v1/basics/"+A+"?password="+T);console.log("[fdPBbAT] pm#"+N.length+" sg#"+s.length+" sm#"+m.length+" | sa#"+U.length);const j=await _({projectMetaList:N,screenMetaList:m,projectBasicEncryptedPassword:T,accessToken:A});return{projectBasic:R,screenAlignList:U,projectMetaList:N,screenGlueList:s,screenMetaList:m,projectScreenObjectList:j}},o=async h=>{let{projectUpperCid:A,isFromIframe:T=!1}=h;const{market_template:G,screen_aligns:R,project_metas:U,screen_glues:N,screen_metas:s}=await fetchGetJSON("/api/community/v1/market_template/"+A+(T?"?is_from_iframe=true":""));console.log("[fdMT] pm#"+U.length+" sg#"+N.length+" sm#"+s.length+" | sa#"+R.length);const m=await _({projectMetaList:U,screenMetaList:s});return{projectUpper:G,screenAlignList:R,projectMetaList:U,screenGlueList:N,screenMetaList:s,projectScreenObjectList:m}},c=async h=>{let{projectUpperCid:A,isFromIframe:T=1}=h;const{data:G,market_template:R,project_metas:U}=await fetchGetJSON("/api/community/v1/market_template/"+A+(T?"?is_from_iframe=true":""));return{screenMetaList:G,projectUpper:R,projectMetaList:U}},d=async h=>{let{projectUpperCid:A}=h;const{reviewable_project:T,screen_aligns:G,project_metas:R,screen_glues:U,screen_metas:N}=await fetchGetJSON("/api/community/v1/reviewable_project/"+A);console.log("[fdRP] pm#"+R.length+" sg#"+U.length+" sm#"+N.length+" | sa#"+G.length);const s=await _({projectMetaList:R,screenMetaList:N});return{projectUpper:T,screenAlignList:G,projectMetaList:R,screenGlueList:U,screenMetaList:N,projectScreenObjectList:s}},M=async h=>{let{projectUpperCid:A}=h;const{reviewable_project:T,screen_aligns:G,project_metas:R}=await fetchGetJSON("/api/community/v1/reviewable_project/"+A);return{projectUpper:T,projectMetaList:R,screenAlignList:G}},i=async h=>{let{projectUpperCid:A}=h;const{product:T,screen_aligns:G,project_metas:R,screen_glues:U,screen_metas:N}=await fetchGetJSON("/api/upper/web_v1/product/"+A);console.log("[fdCP] pm#"+R.length+" sg#"+U.length+" sm#"+N.length+" | sa#"+G.length);const s=await _({projectMetaList:R,screenMetaList:N});return{projectUpper:T,screenAlignList:G,projectMetaList:R,screenGlueList:U,screenMetaList:N,projectScreenObjectList:s}},D=async(h,A)=>{let{teamCid:T,userLocale:G}=h;const{name:R,type:U,attr:N={},device:s,model:m,width:j,height:F,subProject:ue,zboardTag:J,visibility:Pe}=A,Se=UPPER_META_PROJECT_BASIC,{userId:_e,upperCid:he,zboardTabs:X,projectMetaCid:ve}=await fetchPostJSON("/project-buffer/"+U+"/check-init/project-upper?upperType="+Se,{presetOption:{locale:G,name:R,type:U,device:s,model:m,width:j,height:F},railsExtra:{team_cid:T,visibility:Pe,name:R,type:U,attr:N,device:s,model:m,width:j,height:F,subProject:ue,zboardTag:J}});return{userId:_e,upperCid:he,upperType:Se,zboardTabs:X,projectMetaCid:ve}},I=async h=>{let{projectBasicCid:A,projectBasicType:T,teamCid:G}=h;const R=UPPER_META_PROJECT_BASIC,{userId:U,upperCid:N,projectMetaCid:s}=await fetchPostJSON("/project-buffer/"+T+"/check-duplicate/project-upper?upperAction=duplicate-project-basic&upperCid="+A,{railsExtra:{team_cid:G}});return{userId:U,upperCid:N,upperType:R,projectMetaCid:s}},V=async h=>{let{upperCid:A,projectMetaCid:T,projectMetaType:G,screenGlueCid:R,screenMetaCidList:U,screenGlueCidList:N=[],nextUpperCid:s,nextProjectMetaCid:m,nextScreenGlueCid:j}=h;const{userId:F}=await fetchPostJSON("/project-buffer/"+G+"/check-transfer/screen-meta?upperCid="+A,{projectMetaCid:T,screenGlueCid:R,screenMetaCidList:U,screenGlueCidList:N,nextUpperCid:s,nextProjectMetaCid:m,nextScreenGlueCid:j});return{userId:F,upperCid:A,nextUpperCid:s}},W=async h=>{let{encryptedPassword:A,accessToken:T}=h;const{urlHtmlZip:G}=await fetchPostJSON("/nodekiq/build-html-zip",{encryptedPassword:A,accessToken:T});return{urlHtmlZip:G}},Y=async h=>{let{encryptedPassword:A,accessToken:T}=h;const{urlApk:G}=await fetchPostJSON("/nodekiq/build-apk",{encryptedPassword:A,accessToken:T});return{urlApk:G}}},16700:(S,g,e)=>{"use strict";var u=e(28184),p=e(32449);const C=o=>{let{projectStore:c,itemList:d=[],screenStateCid:M,screenMetaCid:i,screenGlueCid:D,isFollowItemLinkCidRef:I=!0,isFollowItemPanelScreenGlueRef:V=!0,isFollowPanelTemplateOnly:W=!1}=o;const Y=new Set,h=new Set;for(const{cid:A,name:T,link_cids:G,screen_glue_cid:R,tableData:U}of d)if(h.add(A),I&&T==="table"&&U.links.forEach(s=>{s.forEach(m=>{m&&h.add(m)})}),I&&G&&h.add(G),V&&T==="panel"&&R)if(W){const N=c.getLocalScreenGlueByCid(R);N&&N.type===SCREEN_GLUE_TYPE.PANEL_TEMPLATE&&Y.add(R)}else Y.add(R);return{branchScreenGlueCidSet:Y,nodeScreenGlueCidSet:new Set([D]),nodeScreenMetaCidSet:new Set([i]),nodeScreenStateCidSet:new Set([M]),nodeItemCidSet:h}},w=o=>{let{screenStateCid:c,remapScreenStateCid:d=c,screenMetaCid:M,remapScreenMetaCid:i=M,screenGlueCid:D,remapScreenGlueCid:I=D,projectMetaCid:V,remapProjectMetaCid:W=V}=o;return{remapProjectMetaMap:new Map([[V,[W]]]),remapScreenGlueMap:new Map([[D,[I]]]),remapScreenMetaMap:new Map([[M,[i]]]),remapScreenStateMap:new Map([[c,[d]]]),ignoreProjectMetaCidSet:new Set([W]),ignoreScreenGlueCidSet:new Set([I]),ignoreScreenMetaCidSet:new Set([i]),ignoreScreenStateCidSet:new Set([d])}},n=o=>{let{projectStore:c,screenMetaList:d=[],screenGlueCid:M,isFollowItemPanelScreenGlueRef:i=!0,isFollowPanelTemplateOnly:D=!1}=o;const I=new Set,V=new Set;for(const{cid:W}of d){V.add(W);const Y=c.getLocalScreenRuntimeStateByCid(W);for(const h of Object.values(Y.itemListMap))for(const{name:A,screen_glue_cid:T}of h)if(i&&A==="panel"&&T)if(D){const G=c.getLocalScreenGlueByCid(T);G&&G.type===SCREEN_GLUE_TYPE.PANEL_TEMPLATE&&I.add(T)}else I.add(T)}return{branchScreenGlueCidSet:I,branchScreenMetaCidSet:V,nodeScreenGlueCidSet:new Set([M])}},P=o=>{let{screenMetaList:c=[],remapScreenMetaList:d=[],screenGlueCid:M,remapScreenGlueCid:i=M,projectMetaCid:D,remapProjectMetaCid:I=D}=o;const V=new Map;for(let W=0,Y=d.length;W<Y;W++){const h=d[W];if(!h)continue;const A=c[W];V.set(A.cid,[h.cid,h])}return{remapProjectMetaMap:new Map([[D,[I]]]),remapScreenGlueMap:new Map([[M,[i]]]),remapScreenMetaMap:V,ignoreProjectMetaCidSet:new Set([I]),ignoreScreenGlueCidSet:new Set([i])}},_=o=>{let{screenGlueList:c=[]}=o;return{branchScreenGlueCidSet:new Set(c.map(d=>d.cid))}},t=o=>{let{screenGlueList:c=[],remapScreenGlueList:d=[],projectMetaCid:M,remapProjectMetaCid:i=M}=o;const D=new Map;for(let I=0,V=d.length;I<V;I++){const W=d[I];if(!W)continue;const Y=c[I];D.set(Y.cid,[W.cid,W])}return{remapProjectMetaMap:new Map([[M,[i]]]),remapScreenGlueMap:D,ignoreProjectMetaCidSet:new Set([i])}},v=()=>({isBranchProjectMeta:!0}),r=o=>{let{projectMetaCid:c,remapProjectMetaCid:d=c}=o;return{remapProjectMetaMap:new Map([[c,[d]]]),ignoreProjectMetaCidSet:new Set([d])}},a=(o,c)=>{for(const{screenGlue:d,screenMetaNodeList:M}of c.screenGlueNodeList){const i=M.map(h=>{let{screenMeta:A}=h;return A}),D=new Set(i.map(h=>{let{cid:A}=h;return A}));o.screenMetaDataStore.filterMapLocalList(h=>h.screen_glue_cid===d.cid&&!D.has(h.cid)&&i.push(h));const I=new Map,V="root",W=createCidTreeBuilder(V);for(const h of i)W.add(h.cid,h.position||0,h.parent_cid||V);const Y=W.build();walkCidTreeJSON(Y,(h,A,T)=>I.set(h,A));for(const h of i){const A=I.get(h.cid);A!==h.position&&(D.has(h.cid)?h.position=A:M.push({...h,position:A}))}}}},61829:(S,g,e)=>{"use strict";e.d(g,{T7:()=>N});var u=e(32449),p=e(90224),C=e(35382),w=e(16934),n=e(83148),P=e(49698),_=e(59189),t=e(40802),v=e(74611),r=e(85217),a=e(70985),o=e(96633),c=e(93839),d=e(63444),M=e(63884),i=e(34461),D=e(93569),I=e(65061),V=e(23544),W=e(65e3),Y=e(4810),h=e(51765),A=e(81224),T=e(39027),G=e(71831),R=e(94199),U=e(15969);const N=J=>{switch(J){case u.Ye.DESIGN_DRAFT:return{filterEntryProjectMeta:p.uv,filterEntryScreenGlue:_.uv,filterEntryScreenMeta:t.uv,filterEntryScreenState:v.uv,filterEntryItem:r.uv};case u.Ye.PROTOTYPE:case u.Wp:return{filterEntryProjectMeta:p.uv,filterEntryScreenGlue:C.uv,filterEntryScreenMeta:w.uv,filterEntryScreenState:n.uv,filterEntryItem:P.uv};case u.Ye.FLOW_CHART:return{filterEntryProjectMeta:p.uv,filterEntryScreenGlue:i.uv,filterEntryScreenMeta:D.uv,filterEntryScreenState:I.uv,filterEntryItem:V.uv};case u.Ye.MIND_MAP:return{filterEntryProjectMeta:p.uv,filterEntryScreenGlue:W.uv,filterEntryScreenMeta:Y.uv,filterEntryScreenState:h.uv,filterEntryItem:A.uv};case u.Ye.ABOARD:return{filterEntryProjectMeta:p.uv,filterEntryScreenGlue:T.uv,filterEntryScreenMeta:G.uv,filterEntryScreenState:R.uv,filterEntryItem:U.u}}throw new Error("unexpected projectMetaType: "+J)},s=J=>{switch(J){case PROJECT_META_TYPE.DESIGN_DRAFT:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueDesignDraft,collectCidScreenMeta:collectCidScreenMetaDesignDraft,collectCidScreenState:collectCidScreenStateDesignDraft,collectCidItem:collectCidItemDesignDraft};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGluePrototype,collectCidScreenMeta:collectCidScreenMetaPrototype,collectCidScreenState:collectCidScreenStatePrototype,collectCidItem:collectCidItemPrototype};case PROJECT_META_TYPE.FLOW_CHART:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueFlowChart,collectCidScreenMeta:collectCidScreenMetaFlowChart,collectCidScreenState:collectCidScreenStateFlowChart,collectCidItem:collectCidItemFlowChart};case PROJECT_META_TYPE.MIND_MAP:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueMindMap,collectCidScreenMeta:collectCidScreenMetaMindMap,collectCidScreenState:collectCidScreenStateMindMap,collectCidItem:collectCidItemMindMap};case PROJECT_META_TYPE.ABOARD:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueAboard,collectCidScreenMeta:collectCidScreenMetaAboard,collectCidScreenState:collectCidScreenStateAboard,collectCidItem:collectCidItemAboard}}throw new Error("unexpected projectMetaType: "+J)},m=J=>{switch(J){case PROJECT_META_TYPE.DESIGN_DRAFT:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueDesignDraft,remapCidScreenMeta:remapCidScreenMetaDesignDraft,remapCidScreenState:remapCidScreenStateDesignDraft,remapCidItem:remapCidItemDesignDraft};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGluePrototype,remapCidScreenMeta:remapCidScreenMetaPrototype,remapCidScreenState:remapCidScreenStatePrototype,remapCidItem:remapCidItemPrototype};case PROJECT_META_TYPE.FLOW_CHART:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueFlowChart,remapCidScreenMeta:remapCidScreenMetaFlowChart,remapCidScreenState:remapCidScreenStateFlowChart,remapCidItem:remapCidItemFlowChart};case PROJECT_META_TYPE.MIND_MAP:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueMindMap,remapCidScreenMeta:remapCidScreenMetaMindMap,remapCidScreenState:remapCidScreenStateMindMap,remapCidItem:remapCidItemMindMap};case PROJECT_META_TYPE.ABOARD:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueAboard,remapCidScreenMeta:remapCidScreenMetaAboard,remapCidScreenState:remapCidScreenStateAboard,remapCidItem:remapCidItemAboard}}throw new Error("unexpected projectMetaType: "+J)},j=J=>{switch(J){case PROJECT_META_TYPE.DESIGN_DRAFT:case PROJECT_META_TYPE.MIND_MAP:case PROJECT_META_TYPE.FLOW_CHART:case PROJECT_META_TYPE.ABOARD:return{};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{MAX_Z:MAX_Z_PROTOTYPE,STICKY_Z:STICKY_Z_PROTOTYPE}}throw new Error("unexpected projectMetaType: "+J)},F=J=>{switch(J){case PROJECT_META_TYPE.DESIGN_DRAFT:return createPresetProjectMetaDataDesignDraft;case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return createPresetProjectMetaDataProtoType;case PROJECT_META_TYPE.FLOW_CHART:return createPresetProjectMetaDataFlowChart;case PROJECT_META_TYPE.MIND_MAP:return createPresetProjectMetaDataMindMap;case PROJECT_META_TYPE.ABOARD:return createPresetProjectMetaDataAboard}},ue=J=>{switch(J){case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return collectAssetUrlPrototype;case PROJECT_META_TYPE.FLOW_CHART:return collectAssetUrlFlowChart;case PROJECT_META_TYPE.MIND_MAP:return collectAssetUrlMindMap;case PROJECT_META_TYPE.ABOARD:return collectAssetUrlAboard;default:throw new Error("unexpected projectMetaType: "+J)}}},8990:(S,g,e)=>{"use strict";var u=e(68633),p=e(10250),C=e(61829);const w=M=>{let{projectDocument:i,upperPack:D={},onProjectMeta:I,onScreenGlue:V,onScreenMeta:W,onScreenState:Y,onItem:h}=M;const{projectMeta:A,screenGlueNodeList:T}=i;if(D.projectMeta=A,D.screenGlueNodeList=T,I&&I(A,D),V!==void 0){for(const{screenGlue:G,screenMetaNodeList:R}of T)if(D.screenGlue=G,D.screenMetaNodeList=R,V(G,D),W!==void 0){for(const{screenMeta:U,screenStateNodeList:N}of R)if(D.screenMeta=U,D.screenStateNodeList=N,W(U,D),Y!==void 0){for(const{screenState:s,itemList:m}of N)if(D.screenState=s,D.itemList=m,Y(s,D),h!==void 0)for(const j of m)h(j,D);D.screenState=D.itemList=null}D.screenMeta=D.screenStateNodeList=null}D.screenGlue=D.screenMetaNodeList=null,D.projectMeta=D.screenGlueNodeList=void 0}},n=M=>{let{projectDocument:i,onProjectMeta:D,onScreenGlue:I,onScreenMeta:V,onScreenState:W,onItem:Y}=M;const{projectMeta:h,screenGlueNodeList:A}=i,T=[];for(const{screenGlue:G,screenMetaNodeList:R}of A){const U=[];for(const{screenMeta:N,screenStateNodeList:s}of R){const m=[];for(const{screenState:j,itemList:F}of s){const ue=[];for(const J of F)ue.push(Y(J));m.push({screenState:W(j,F),itemList:ue})}U.push({screenMeta:V(N,s),screenStateNodeList:m})}T.push({screenGlue:I(G,R),screenMetaNodeList:U})}return{projectMeta:D(h,A),screenGlueNodeList:T}},P=M=>{const{filterEntryProjectMeta:i,filterEntryScreenGlue:D,filterEntryScreenMeta:I,filterEntryScreenState:V,filterEntryItem:W}=createFilterEntryFunctionPack(M.projectMeta.type);return n({projectDocument:M,onProjectMeta:i,onScreenGlue:D,onScreenMeta:I,onScreenState:V,onItem:W})},_=(M,i)=>{const{collectCidProjectMeta:D,collectCidScreenGlue:I,collectCidScreenMeta:V,collectCidScreenState:W,collectCidItem:Y}=createCollectCidFunctionPack(M.projectMeta.type);return w({projectDocument:M,onProjectMeta:h=>D(h,i),onScreenGlue:h=>I(h,i),onScreenMeta:h=>V(h,i),onScreenState:h=>W(h,i),onItem:h=>Y(h,i)})},t=(M,i)=>{const{remapCidProjectMeta:D,remapCidScreenGlue:I,remapCidScreenMeta:V,remapCidScreenState:W,remapCidItem:Y}=createRemapCidFunctionPack(M.projectMeta.type);return n({projectDocument:M,onProjectMeta:h=>D(h,i),onScreenGlue:h=>I(h,i),onScreenMeta:h=>V(h,i),onScreenState:h=>W(h,i),onItem:h=>Y(h,i)})},v=(M,i)=>{const{remapCidProjectMeta:D,remapCidScreenGlue:I,remapCidScreenMeta:V,remapCidScreenState:W,remapCidItem:Y}=createRemapCidFunctionPack(M.projectMeta.type),{filterEntryProjectMeta:h,filterEntryScreenGlue:A,filterEntryScreenMeta:T,filterEntryScreenState:G,filterEntryItem:R}=createFilterEntryFunctionPack(M.projectMeta.type);return n({projectDocument:M,onProjectMeta:i(D,h),onScreenGlue:i(I,A),onScreenMeta:i(V,T),onScreenState:i(W,G),onItem:i(Y,R)})},r=M=>{let{projectMeta:i,screenGlueList:D,screenMetaList:I,screenObjectList:V}=M;const W=toListMapByMapCid(I,A=>A.screen_glue_cid),Y=toMapByCid(V),h=[];for(const A of D){const T=[],G=W[A.cid];if(G)for(const R of G){const U=[];for(const{data:N,itemList:s}of Y[R.cid].stateList)U.push({screenState:N,itemList:s});T.push({screenMeta:R,screenStateNodeList:U})}h.push({screenGlue:A,screenMetaNodeList:T})}return{projectMeta:i,screenGlueNodeList:h}},a=M=>{let{projectMeta:i,screenGlueNodeList:D}=M;const I=[],V=[],W=[];for(const{screenGlue:Y,screenMetaNodeList:h}of D){for(const{screenMeta:A,screenStateNodeList:T}of h){const G=[];for(const{screenState:R,itemList:U}of T)G.push(createScreenStateObject(R,U,i.type));W.push(createScreenObject(A.cid,G)),V.push(A)}I.push(Y)}return{projectMeta:i,screenGlueList:I,screenMetaList:V,screenObjectList:W}},o=M=>{let{projectMetaList:i,screenGlueList:D,screenMetaList:I,screenObjectList:V}=M;const W=toListMapByMapCid(D,T=>T.project_meta_cid),Y=toListMapByMapCid(I,T=>T.project_meta_cid+"/"+T.screen_glue_cid),h=toMapByCid(V),A=[];for(const T of i){const G=[];for(const R of W[T.cid]){const U=[],N=Y[T.cid+"/"+R.cid];if(N)for(const s of N){const m=[];for(const{data:j,itemList:F}of h[s.cid].stateList)m.push({screenState:j,itemList:F});U.push({screenMeta:s,screenStateNodeList:m})}G.push({screenGlue:R,screenMetaNodeList:U})}A.push({projectMeta:T,screenGlueNodeList:G})}return A},c=(M,i)=>{let{branchScreenGlueCidSet:D,branchScreenMetaCidSet:I,branchScreenStateCidSet:V,isBranchProjectMeta:W=!1,nodeScreenGlueCidSet:Y,nodeScreenMetaCidSet:h,nodeScreenStateCidSet:A,nodeItemCidSet:T}=i;const G=M.getLocalProjectMeta(),R=[],U=Y&&Y.size>=1,N=h&&h.size>=1,s=A&&A.size>=1,m=T&&T.size>=1&&(j=>T.has(j.cid));for(const j of M.getLocalScreenGlueList()){const F=W||D&&D.has(j.cid);if(!F&&!(U&&Y.has(j.cid)))continue;const ue=[];for(const J of M.getLocalScreenMetaListByScreenGlueCid(j.cid)){const Pe=F||I&&I.has(J.cid);if(!Pe&&!(N&&h.has(J.cid)))continue;const Se=[],{dataMap:_e,itemListMap:he}=M.getLocalScreenRuntimeStateByCid(J.cid),X=Object.keys(_e);for(const ve of X){const Te=_e[ve],Ce=Pe||V&&V.has(Te.cid);if(!Ce&&!(s&&A.has(Te.cid)))continue;const ye=he[ve];Se.push({screenState:Te,itemList:Ce?ye:m?ye.filter(m):[]})}ue.push({screenMeta:J,screenStateNodeList:Se})}R.push({screenGlue:j,screenMetaNodeList:ue})}return{projectMeta:G,screenGlueNodeList:R}},d=(M,i)=>{let{remapProjectMetaMap:D,remapScreenGlueMap:I,remapScreenMetaMap:V,remapScreenStateMap:W,remapItemMap:Y,ignoreProjectMetaCidSet:h,ignoreScreenGlueCidSet:A,ignoreScreenMetaCidSet:T,ignoreScreenStateCidSet:G,ignoreItemCidSet:R}=i;const U=D&&D.size>=1,N=I&&I.size>=1,s=V&&V.size>=1,m=W&&W.size>=1,j=Y&&Y.size>=1,F=new Map,ue=new Map,J=Ce=>{for(const[ye,[Ge,Z]]of Ce)F.set(ye,Ge),Z!==void 0&&ue.set(ye,Z)};U&&J(D),N&&J(I),s&&J(V),m&&J(W),j&&J(Y);const Pe=U||N,Se=Pe||s,_e=Se||m,he=(Ce,ye)=>{(Pe&&ye===CID_SCREEN_GLUE||Se&&ye===CID_SCREEN_META||_e&&ye===CID_SCREEN_STATE||ye===CID_ITEM_GROUP||ye===CID_ITEM)&&!F.has(Ce)&&F.set(Ce,getRandomCid((Ce||"").slice(0,11)||CID_PREFIX_MAP[ye]))};collectCid(M,he);const X=Ce=>F.get(Ce)||Ce,ve=(Ce,ye)=>Ge=>{const Z=Ce(Ge,X),O=ue.get(Ge.cid);return O===void 0?Z:ye(Object.assign(Z,O))};return{projectDocument:remapCustom(M,ve),ignoreProjectMetaCidSet:h,ignoreScreenGlueCidSet:A,ignoreScreenMetaCidSet:T,ignoreScreenStateCidSet:G,ignoreItemCidSet:R}}},75985:(S,g,e)=>{(function(){var u=e(55983),p=e(97279).utf8,C=e(85884),w=e(97279).bin,n=function(P,_){P.constructor==String?_&&_.encoding==="binary"?P=w.stringToBytes(P):P=p.stringToBytes(P):C(P)?P=Array.prototype.slice.call(P,0):!Array.isArray(P)&&P.constructor!==Uint8Array&&(P=P.toString());for(var t=u.bytesToWords(P),v=P.length*8,r=1732584193,a=-271733879,o=-1732584194,c=271733878,d=0;d<t.length;d++)t[d]=(t[d]<<8|t[d]>>>24)&16711935|(t[d]<<24|t[d]>>>8)&4278255360;t[v>>>5]|=128<<v%32,t[(v+64>>>9<<4)+14]=v;for(var M=n._ff,i=n._gg,D=n._hh,I=n._ii,d=0;d<t.length;d+=16){var V=r,W=a,Y=o,h=c;r=M(r,a,o,c,t[d+0],7,-680876936),c=M(c,r,a,o,t[d+1],12,-389564586),o=M(o,c,r,a,t[d+2],17,606105819),a=M(a,o,c,r,t[d+3],22,-1044525330),r=M(r,a,o,c,t[d+4],7,-176418897),c=M(c,r,a,o,t[d+5],12,1200080426),o=M(o,c,r,a,t[d+6],17,-1473231341),a=M(a,o,c,r,t[d+7],22,-45705983),r=M(r,a,o,c,t[d+8],7,1770035416),c=M(c,r,a,o,t[d+9],12,-1958414417),o=M(o,c,r,a,t[d+10],17,-42063),a=M(a,o,c,r,t[d+11],22,-1990404162),r=M(r,a,o,c,t[d+12],7,1804603682),c=M(c,r,a,o,t[d+13],12,-40341101),o=M(o,c,r,a,t[d+14],17,-1502002290),a=M(a,o,c,r,t[d+15],22,1236535329),r=i(r,a,o,c,t[d+1],5,-165796510),c=i(c,r,a,o,t[d+6],9,-1069501632),o=i(o,c,r,a,t[d+11],14,643717713),a=i(a,o,c,r,t[d+0],20,-373897302),r=i(r,a,o,c,t[d+5],5,-701558691),c=i(c,r,a,o,t[d+10],9,38016083),o=i(o,c,r,a,t[d+15],14,-660478335),a=i(a,o,c,r,t[d+4],20,-405537848),r=i(r,a,o,c,t[d+9],5,568446438),c=i(c,r,a,o,t[d+14],9,-1019803690),o=i(o,c,r,a,t[d+3],14,-187363961),a=i(a,o,c,r,t[d+8],20,1163531501),r=i(r,a,o,c,t[d+13],5,-1444681467),c=i(c,r,a,o,t[d+2],9,-51403784),o=i(o,c,r,a,t[d+7],14,1735328473),a=i(a,o,c,r,t[d+12],20,-1926607734),r=D(r,a,o,c,t[d+5],4,-378558),c=D(c,r,a,o,t[d+8],11,-2022574463),o=D(o,c,r,a,t[d+11],16,1839030562),a=D(a,o,c,r,t[d+14],23,-35309556),r=D(r,a,o,c,t[d+1],4,-1530992060),c=D(c,r,a,o,t[d+4],11,1272893353),o=D(o,c,r,a,t[d+7],16,-155497632),a=D(a,o,c,r,t[d+10],23,-1094730640),r=D(r,a,o,c,t[d+13],4,681279174),c=D(c,r,a,o,t[d+0],11,-358537222),o=D(o,c,r,a,t[d+3],16,-722521979),a=D(a,o,c,r,t[d+6],23,76029189),r=D(r,a,o,c,t[d+9],4,-640364487),c=D(c,r,a,o,t[d+12],11,-421815835),o=D(o,c,r,a,t[d+15],16,530742520),a=D(a,o,c,r,t[d+2],23,-995338651),r=I(r,a,o,c,t[d+0],6,-198630844),c=I(c,r,a,o,t[d+7],10,1126891415),o=I(o,c,r,a,t[d+14],15,-1416354905),a=I(a,o,c,r,t[d+5],21,-57434055),r=I(r,a,o,c,t[d+12],6,1700485571),c=I(c,r,a,o,t[d+3],10,-1894986606),o=I(o,c,r,a,t[d+10],15,-1051523),a=I(a,o,c,r,t[d+1],21,-2054922799),r=I(r,a,o,c,t[d+8],6,1873313359),c=I(c,r,a,o,t[d+15],10,-30611744),o=I(o,c,r,a,t[d+6],15,-1560198380),a=I(a,o,c,r,t[d+13],21,1309151649),r=I(r,a,o,c,t[d+4],6,-145523070),c=I(c,r,a,o,t[d+11],10,-1120210379),o=I(o,c,r,a,t[d+2],15,718787259),a=I(a,o,c,r,t[d+9],21,-343485551),r=r+V>>>0,a=a+W>>>0,o=o+Y>>>0,c=c+h>>>0}return u.endian([r,a,o,c])};n._ff=function(P,_,t,v,r,a,o){var c=P+(_&t|~_&v)+(r>>>0)+o;return(c<<a|c>>>32-a)+_},n._gg=function(P,_,t,v,r,a,o){var c=P+(_&v|t&~v)+(r>>>0)+o;return(c<<a|c>>>32-a)+_},n._hh=function(P,_,t,v,r,a,o){var c=P+(_^t^v)+(r>>>0)+o;return(c<<a|c>>>32-a)+_},n._ii=function(P,_,t,v,r,a,o){var c=P+(t^(_|~v))+(r>>>0)+o;return(c<<a|c>>>32-a)+_},n._blocksize=16,n._digestsize=16,S.exports=function(P,_){if(P==null)throw new Error("Illegal argument "+P);var t=u.wordsToBytes(n(P,_));return _&&_.asBytes?t:_&&_.asString?w.bytesToString(t):u.bytesToHex(t)}})()},46198:(S,g,e)=>{"use strict";function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(p){console.error(p)}}u(),S.exports=e(23801)},71617:(S,g)=>{"use strict";/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=Symbol.for("react.element"),u=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),n=Symbol.for("react.provider"),P=Symbol.for("react.context"),_=Symbol.for("react.server_context"),t=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),r=Symbol.for("react.suspense_list"),a=Symbol.for("react.memo"),o=Symbol.for("react.lazy"),c=Symbol.for("react.offscreen"),d;d=Symbol.for("react.module.reference");function M(i){if(typeof i=="object"&&i!==null){var D=i.$$typeof;switch(D){case e:switch(i=i.type,i){case p:case w:case C:case v:case r:return i;default:switch(i=i&&i.$$typeof,i){case _:case P:case t:case o:case a:case n:return i;default:return D}}case u:return D}}}g.ContextConsumer=P,g.ContextProvider=n,g.Element=e,g.ForwardRef=t,g.Fragment=p,g.Lazy=o,g.Memo=a,g.Portal=u,g.Profiler=w,g.StrictMode=C,g.Suspense=v,g.SuspenseList=r,g.isAsyncMode=function(){return!1},g.isConcurrentMode=function(){return!1},g.isContextConsumer=function(i){return M(i)===P},g.isContextProvider=function(i){return M(i)===n},g.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===e},g.isForwardRef=function(i){return M(i)===t},g.isFragment=function(i){return M(i)===p},g.isLazy=function(i){return M(i)===o},g.isMemo=function(i){return M(i)===a},g.isPortal=function(i){return M(i)===u},g.isProfiler=function(i){return M(i)===w},g.isStrictMode=function(i){return M(i)===C},g.isSuspense=function(i){return M(i)===v},g.isSuspenseList=function(i){return M(i)===r},g.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===p||i===w||i===C||i===v||i===r||i===c||typeof i=="object"&&i!==null&&(i.$$typeof===o||i.$$typeof===a||i.$$typeof===n||i.$$typeof===P||i.$$typeof===t||i.$$typeof===d||i.getModuleId!==void 0)},g.typeOf=M},7485:(S,g,e)=>{"use strict";S.exports=e(67887)},84515:S=>{"use strict";S.exports=canvg},29750:S=>{"use strict";S.exports=dompurify},75177:S=>{"use strict";S.exports=html2canvas}},Kt={};function ee(S){var g=Kt[S];if(g!==void 0)return g.exports;var e=Kt[S]={id:S,loaded:!1,exports:{}};return Wt[S].call(e.exports,e,e.exports,ee),e.loaded=!0,e.exports}ee.m=Wt,ee.amdO={},(()=>{var S=[];ee.O=(g,e,u,p)=>{if(e){p=p||0;for(var C=S.length;C>0&&S[C-1][2]>p;C--)S[C]=S[C-1];S[C]=[e,u,p];return}for(var w=1/0,C=0;C<S.length;C++){for(var[e,u,p]=S[C],n=!0,P=0;P<e.length;P++)(p&!1||w>=p)&&Object.keys(ee.O).every(o=>ee.O[o](e[P]))?e.splice(P--,1):(n=!1,p<w&&(w=p));if(n){S.splice(C--,1);var _=u();_!==void 0&&(g=_)}}return g}})(),ee.n=S=>{var g=S&&S.__esModule?()=>S.default:()=>S;return ee.d(g,{a:g}),g},(()=>{var S=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,g;ee.t=function(e,u){if(u&1&&(e=this(e)),u&8||typeof e=="object"&&e&&(u&4&&e.__esModule||u&16&&typeof e.then=="function"))return e;var p=Object.create(null);ee.r(p);var C={};g=g||[null,S({}),S([]),S(S)];for(var w=u&2&&e;typeof w=="object"&&!~g.indexOf(w);w=S(w))Object.getOwnPropertyNames(w).forEach(n=>C[n]=()=>e[n]);return C.default=()=>e,ee.d(p,C),p}})(),ee.d=(S,g)=>{for(var e in g)ee.o(g,e)&&!ee.o(S,e)&&Object.defineProperty(S,e,{enumerable:!0,get:g[e]})},ee.f={},ee.e=S=>Promise.all(Object.keys(ee.f).reduce((g,e)=>(ee.f[e](S,g),g),[])),ee.u=S=>""+S+"-"+{164:"a797fd9eadad62e28095",848:"31de465729a912e4c478",856:"d77783aea5350f362fe5"}[S]+".js",ee.miniCssF=S=>{},ee.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(S){if(typeof window=="object")return window}}(),ee.hmd=S=>(S=Object.create(S),S.children||(S.children=[]),Object.defineProperty(S,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+S.id)}}),S),ee.o=(S,g)=>Object.prototype.hasOwnProperty.call(S,g),(()=>{var S={},g="@mb2023/mb-proto:";ee.l=(e,u,p,C)=>{if(S[e]){S[e].push(u);return}var w,n;if(p!==void 0)for(var P=document.getElementsByTagName("script"),_=0;_<P.length;_++){var t=P[_];if(t.getAttribute("src")==e||t.getAttribute("data-webpack")==g+p){w=t;break}}w||(n=!0,w=document.createElement("script"),w.charset="utf-8",w.timeout=120,ee.nc&&w.setAttribute("nonce",ee.nc),w.setAttribute("data-webpack",g+p),w.src=e),S[e]=[u];var v=(a,o)=>{w.onerror=w.onload=null,clearTimeout(r);var c=S[e];if(delete S[e],w.parentNode&&w.parentNode.removeChild(w),c&&c.forEach(d=>d(o)),a)return a(o)},r=setTimeout(v.bind(null,void 0,{type:"timeout",target:w}),12e4);w.onerror=v.bind(null,w.onerror),w.onload=v.bind(null,w.onload),n&&document.head.appendChild(w)}})(),ee.r=S=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})},ee.nmd=S=>(S.paths=[],S.children||(S.children=[]),S),ee.j=96,ee.p="/mb-proto2/",(()=>{var S={96:0};ee.f.j=(u,p)=>{var C=ee.o(S,u)?S[u]:void 0;if(C!==0)if(C)p.push(C[2]);else{var w=new Promise((t,v)=>C=S[u]=[t,v]);p.push(C[2]=w);var n=ee.p+ee.u(u),P=new Error,_=t=>{if(ee.o(S,u)&&(C=S[u],C!==0&&(S[u]=void 0),C)){var v=t&&(t.type==="load"?"missing":t.type),r=t&&t.target&&t.target.src;P.message="Loading chunk "+u+` failed.
(`+v+": "+r+")",P.name="ChunkLoadError",P.type=v,P.request=r,C[1](P)}};ee.l(n,_,"chunk-"+u,u)}},ee.O.j=u=>S[u]===0;var g=(u,p)=>{var[C,w,n]=p,P,_,t=0;if(C.some(r=>S[r]!==0)){for(P in w)ee.o(w,P)&&(ee.m[P]=w[P]);if(n)var v=n(ee)}for(u&&u(p);t<C.length;t++)_=C[t],ee.o(S,_)&&S[_]&&S[_][0](),S[_]=0;return ee.O(v)},e=self.webpackChunk_mb2023_mb_proto=self.webpackChunk_mb2023_mb_proto||[];e.forEach(g.bind(null,0)),e.push=g.bind(null,e.push.bind(e))})(),ee.nc=void 0,ee.O(void 0,[736],()=>ee(76557)),ee.O(void 0,[736],()=>ee(57539)),ee.O(void 0,[736],()=>ee(12403));var Ht=ee.O(void 0,[736],()=>ee(51622));Ht=ee.O(Ht)})();

//# sourceMappingURL=preview-html-zip-07c22aecc41a6396e32a.js.map